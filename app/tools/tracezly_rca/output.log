2025-12-24 20:33:44.855 | INFO     | __main__:main:36 - Device: cuda:0
2025-12-24 20:33:44.859 | INFO     | __main__:main:39 - Loading dataset tianchi2 (test)...
2025-12-24 20:33:44.917 | INFO     | tracegnn.models.gtrace.dataset:init_config:35 - Get latency range...
2025-12-24 20:33:50.687 | INFO     | tracegnn.models.gtrace.dataset:__init__:79 - 25738 in train dataset.
2025-12-24 20:33:50.743 | INFO     | tracegnn.models.gtrace.dataset:__init__:79 - 2187 in val dataset.
2025-12-24 20:33:50.794 | INFO     | tracegnn.models.gtrace.dataset:__init__:105 - 2289 in test dataset.
2025-12-24 20:33:51.259 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:119 - Start training...
2025-12-24 20:33:51.263 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 0
2025-12-24 20:33:51.269 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-24 20:46:34.075 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 0  Loss: 22676.703337922692 Structure Loss: 46753.325691478974 Latency Loss: 4.763264023431457
2025-12-24 20:47:02.524 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 0  Loss: 1.6685317556063335 Structure Loss: 3.4442244900597467 Latency Loss: 0.31144393069876564
2025-12-24 20:47:02.525 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-24 20:47:02.529 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-24 20:47:02.534 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-24 20:47:02.534 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-24 20:56:18.243 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-24 20:56:18.262 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 496682.875, 'auc': 0.5082777406851853, 'best_threshold': 1.523290991783142, 'best_fscore': 0.8014414414414415, 'best_pr': 0.6817903126916003, 'best_rc': 0.972027972027972, 'threshold': 3.287410721707344, 'median': 1.7756909132003784, 'mad': 0.3398803472518921, 'fscore': 0.02641802641802642, 'precision': 0.11888111888111888, 'recall': 0.01486013986013986}
2025-12-24 20:56:18.262 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-24 20:56:18.263 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 20:56:18.263 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-24 20:56:18.263 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 20:56:18.263 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 20:56:18.263 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['checkout', 'product-catalog', 'cart']
2025-12-24 20:56:18.263 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0510
2025-12-24 20:56:18.263 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 20:56:18.263 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: checkout (id=12) → 0.2718
2025-12-24 20:56:18.263 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: product-catalog (id=2) → 0.1386
2025-12-24 20:56:18.269 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: cart (id=4) → 0.1365
2025-12-24 20:56:18.269 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: frontend (id=1) → 0.1343
2025-12-24 20:56:18.269 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: currency (id=10) → 0.0844
2025-12-24 20:56:18.269 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: email (id=16) → 0.0686
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: quote (id=14) → 0.0577
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0510
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0403
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0170
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['checkout', 'cart', 'frontend']
2025-12-24 20:56:18.270 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-24 20:56:18.270 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 20:56:18.270 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: checkout (id=12) → 0.2417
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: cart (id=4) → 0.1962
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: frontend (id=1) → 0.1191
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: email (id=16) → 0.0983
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: quote (id=14) → 0.0870
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: shipping (id=13) → 0.0727
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: payment (id=15) → 0.0630
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: product-catalog (id=2) → 0.0498
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: currency (id=10) → 0.0480
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0241
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['checkout', 'cart', 'frontend']
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0567
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: checkout (id=12) → 0.2641
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: cart (id=4) → 0.1517
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: frontend (id=1) → 0.1304
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: product-catalog (id=2) → 0.1157
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: email (id=16) → 0.0763
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0749
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: quote (id=14) → 0.0651
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0567
2025-12-24 20:56:18.271 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0463
2025-12-24 20:56:18.272 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0188
2025-12-24 20:56:18.868 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-24 20:56:18.869 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-24 20:56:18.873 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-24 20:56:18.873 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-24 20:56:18.873 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-24 20:56:18.873 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=33, Top3=141, Top5=149
2025-12-24 20:56:18.873 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0288, Top3=0.1233, Top5=0.1302
2025-12-24 20:56:18.873 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-24 20:56:18.873 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-24 20:56:18.873 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-24 20:56:18.873 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-24 20:56:18.873 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-24 20:56:18.873 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-24 20:56:18.873 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-24 20:56:18.873 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0288，Top3根因定位准确率: 0.1233，Top5根因定位准确率: 0.1302
2025-12-24 20:56:18.986 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-24 20:56:19.080 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 1
2025-12-24 20:56:19.080 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-24 21:08:48.475 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 1  Loss: 8616.993474893494 Structure Loss: 18783.27362241795 Latency Loss: 4.363429974063789
2025-12-24 21:09:22.071 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 1  Loss: 1.3783977429072063 Structure Loss: 3.008621480729845 Latency Loss: 0.29596708466609317
2025-12-24 21:09:22.077 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-24 21:09:22.081 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-24 21:09:22.082 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-24 21:09:22.082 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-24 21:19:55.225 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-24 21:19:55.240 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 495590.78125, 'auc': 0.67003036066105, 'best_threshold': 1.9679532051086426, 'best_fscore': 0.8434650455927051, 'best_pr': 0.7459677419354839, 'best_rc': 0.9702797202797203, 'threshold': 4.680735564517975, 'median': 2.2868452072143555, 'mad': 0.5382189750671387, 'fscore': 0.02717825739408473, 'precision': 0.1588785046728972, 'recall': 0.01486013986013986}
2025-12-24 21:19:55.241 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-24 21:19:55.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 21:19:55.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-24 21:19:55.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 21:19:55.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 21:19:55.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['checkout', 'product-catalog', 'cart']
2025-12-24 21:19:55.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0506
2025-12-24 21:19:55.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 21:19:55.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: checkout (id=12) → 0.2692
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: product-catalog (id=2) → 0.1371
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: cart (id=4) → 0.1352
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: frontend (id=1) → 0.1326
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: currency (id=10) → 0.0839
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: email (id=16) → 0.0679
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: quote (id=14) → 0.0580
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0506
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0486
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0168
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 21:19:55.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['checkout', 'cart', 'frontend']
2025-12-24 21:19:55.243 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-24 21:19:55.243 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: checkout (id=12) → 0.2368
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: cart (id=4) → 0.1925
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: frontend (id=1) → 0.1165
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: email (id=16) → 0.0960
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: quote (id=14) → 0.0873
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: payment (id=15) → 0.0802
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: shipping (id=13) → 0.0713
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: product-catalog (id=2) → 0.0487
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: currency (id=10) → 0.0471
2025-12-24 21:19:55.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0236
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['checkout', 'cart', 'frontend']
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #9/10, 分数: 0.0563
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: checkout (id=12) → 0.2611
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: cart (id=4) → 0.1501
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: frontend (id=1) → 0.1285
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: product-catalog (id=2) → 0.1143
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: email (id=16) → 0.0754
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0743
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: quote (id=14) → 0.0650
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: payment (id=15) → 0.0564
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #9: shipping (id=13) → 0.0563
2025-12-24 21:19:55.244 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0187
2025-12-24 21:19:55.566 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-24 21:19:55.566 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-24 21:19:55.566 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-24 21:19:55.566 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-24 21:19:55.566 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-24 21:19:55.566 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=40, Top3=142, Top5=166
2025-12-24 21:19:55.566 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0350, Top3=0.1241, Top5=0.1451
2025-12-24 21:19:55.566 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-24 21:19:55.566 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-24 21:19:55.566 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-24 21:19:55.566 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-24 21:19:55.566 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-24 21:19:55.566 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-24 21:19:55.566 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-24 21:19:55.567 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0350，Top3根因定位准确率: 0.1241，Top5根因定位准确率: 0.1451
2025-12-24 21:19:55.648 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-24 21:19:55.752 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 2
2025-12-24 21:19:55.752 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-24 21:32:18.577 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 2  Loss: 8158.319665023006 Structure Loss: 18159.0875959971 Latency Loss: 9.198741900448752
2025-12-24 21:32:45.801 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 2  Loss: 0.4993404530816608 Structure Loss: 1.3600767519738939 Latency Loss: 0.2180016240518954
2025-12-24 21:32:45.801 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-24 21:32:45.811 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-24 21:32:45.821 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-24 21:32:45.821 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-24 21:40:05.849 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-24 21:40:05.870 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 587678.6875, 'auc': 0.7794646595857451, 'best_threshold': 2.851881980895996, 'best_fscore': 0.9160691691269506, 'best_pr': 0.8850855745721271, 'best_rc': 0.9493006993006993, 'threshold': 8.374866674518586, 'median': 3.0812039375305176, 'mad': 1.1901755332946777, 'fscore': 0.00847457627118644, 'precision': 0.1388888888888889, 'recall': 0.004370629370629371}
2025-12-24 21:40:05.871 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-24 21:40:05.871 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 21:40:05.872 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-24 21:40:05.874 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 21:40:05.874 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 21:40:05.875 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['checkout', 'product-catalog', 'frontend']
2025-12-24 21:40:05.875 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #9/10, 分数: 0.0496
2025-12-24 21:40:05.875 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 21:40:05.875 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: checkout (id=12) → 0.2606
2025-12-24 21:40:05.875 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: product-catalog (id=2) → 0.1338
2025-12-24 21:40:05.876 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: frontend (id=1) → 0.1314
2025-12-24 21:40:05.876 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: cart (id=4) → 0.1311
2025-12-24 21:40:05.876 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: currency (id=10) → 0.0813
2025-12-24 21:40:05.876 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: payment (id=15) → 0.0735
2025-12-24 21:40:05.876 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: email (id=16) → 0.0652
2025-12-24 21:40:05.876 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: quote (id=14) → 0.0573
2025-12-24 21:40:05.876 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #9: shipping (id=13) → 0.0496
2025-12-24 21:40:05.876 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0164
2025-12-24 21:40:05.882 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 21:40:05.882 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-24 21:40:05.882 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-24 21:40:05.882 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-24 21:40:05.882 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['checkout', 'cart', 'payment']
2025-12-24 21:40:05.883 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-24 21:40:05.883 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: checkout (id=12) → 0.2160
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: cart (id=4) → 0.1761
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: payment (id=15) → 0.1543
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: frontend (id=1) → 0.1079
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: email (id=16) → 0.0867
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: quote (id=14) → 0.0826
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: shipping (id=13) → 0.0665
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: product-catalog (id=2) → 0.0449
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: currency (id=10) → 0.0431
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0218
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['checkout', 'cart', 'frontend']
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #9/10, 分数: 0.0547
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: checkout (id=12) → 0.2509
2025-12-24 21:40:05.883 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: cart (id=4) → 0.1444
2025-12-24 21:40:05.884 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: frontend (id=1) → 0.1263
2025-12-24 21:40:05.884 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: product-catalog (id=2) → 0.1108
2025-12-24 21:40:05.884 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: payment (id=15) → 0.0866
2025-12-24 21:40:05.884 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: email (id=16) → 0.0718
2025-12-24 21:40:05.884 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: currency (id=10) → 0.0716
2025-12-24 21:40:05.884 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: quote (id=14) → 0.0648
2025-12-24 21:40:05.884 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #9: shipping (id=13) → 0.0547
2025-12-24 21:40:05.884 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0180
2025-12-24 21:40:06.237 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-24 21:40:06.239 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-24 21:40:06.239 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-24 21:40:06.239 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-24 21:40:06.239 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-24 21:40:06.239 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=51, Top3=234, Top5=387
2025-12-24 21:40:06.239 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0446, Top3=0.2045, Top5=0.3383
2025-12-24 21:40:06.239 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-24 21:40:06.239 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-24 21:40:06.239 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-24 21:40:06.239 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-24 21:40:06.239 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-24 21:40:06.239 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-24 21:40:06.239 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-24 21:40:06.239 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0446，Top3根因定位准确率: 0.2045，Top5根因定位准确率: 0.3383
2025-12-24 21:40:06.345 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-24 21:40:06.434 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 3
2025-12-24 21:40:06.434 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-24 21:51:54.603 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 3  Loss: 9247.891070901167 Structure Loss: 19839.039052837557 Latency Loss: 58.47069401426776
2025-12-24 21:52:19.171 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 3  Loss: 1.0553174416224163 Structure Loss: 3.526512953970167 Latency Loss: -0.04549962416705158
2025-12-24 21:52:19.172 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 4
2025-12-24 21:52:19.173 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-24 22:05:51.962 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 4  Loss: 8555.917672622913 Structure Loss: 18280.583015335003 Latency Loss: 81.20143666702535
2025-12-24 22:06:21.530 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 4  Loss: -3.644922627343072 Structure Loss: 2.8940073119269476 Latency Loss: -0.945753789610333
2025-12-24 22:06:21.530 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-24 22:06:21.533 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-24 22:06:21.533 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-24 22:06:21.534 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-24 22:14:07.817 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-24 22:14:07.828 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 467065.65625, 'auc': 0.9138183889372302, 'best_threshold': 38.385704040527344, 'best_fscore': 0.9574844995571302, 'best_pr': 0.9703770197486535, 'best_rc': 0.9449300699300699, 'threshold': 151.94923448905945, 'median': 21.60712432861328, 'mad': 29.30484962463379, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-24 22:14:07.828 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'quote', 'checkout']
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #9/10, 分数: 0.0000
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: quote (id=14) → 0.0000
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: checkout (id=12) → 0.0000
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: product-catalog (id=2) → 0.0000
2025-12-24 22:14:07.829 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 22:14:07.830 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: frontend (id=1) → 0.0000
2025-12-24 22:14:07.830 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: currency (id=10) → 0.0000
2025-12-24 22:14:07.830 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: email (id=16) → 0.0000
2025-12-24 22:14:07.830 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #9: shipping (id=13) → 0.0000
2025-12-24 22:14:07.830 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0000
2025-12-24 22:14:07.830 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 22:14:07.830 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'quote', 'checkout']
2025-12-24 22:14:07.831 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-24 22:14:07.831 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: quote (id=14) → 0.0000
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: checkout (id=12) → 0.0000
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: cart (id=4) → 0.0000
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: frontend (id=1) → 0.0000
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: shipping (id=13) → 0.0000
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: email (id=16) → 0.0000
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: product-catalog (id=2) → 0.0000
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: currency (id=10) → 0.0000
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0000
2025-12-24 22:14:07.831 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'quote', 'checkout']
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #9/10, 分数: 0.0000
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: quote (id=14) → 0.0000
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: checkout (id=12) → 0.0000
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: product-catalog (id=2) → 0.0000
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: frontend (id=1) → 0.0000
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: currency (id=10) → 0.0000
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: email (id=16) → 0.0000
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #9: shipping (id=13) → 0.0000
2025-12-24 22:14:07.832 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: load-generator (id=3) → 0.0000
2025-12-24 22:14:08.655 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-24 22:14:08.655 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-24 22:14:08.655 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-24 22:14:08.655 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-24 22:14:08.655 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-24 22:14:08.655 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=242, Top3=297, Top5=371
2025-12-24 22:14:08.656 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2115, Top3=0.2596, Top5=0.3243
2025-12-24 22:14:08.656 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-24 22:14:08.656 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-24 22:14:08.656 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-24 22:14:08.656 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-24 22:14:08.656 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-24 22:14:08.656 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-24 22:14:08.656 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-24 22:14:08.656 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2115，Top3根因定位准确率: 0.2596，Top5根因定位准确率: 0.3243
2025-12-24 22:14:08.849 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-24 22:14:08.982 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 5
2025-12-24 22:14:08.983 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-24 22:28:53.197 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 5  Loss: 9506.104206529584 Structure Loss: 19056.46246240937 Latency Loss: 87.35592803229937
2025-12-24 22:29:25.041 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 5  Loss: -17.34999879201253 Structure Loss: 3.5414424339930215 Latency Loss: -1.6528676350911458
2025-12-24 22:29:25.041 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-24 22:29:25.075 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-24 22:29:25.076 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-24 22:29:25.076 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-24 22:37:48.764 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-24 22:37:48.778 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 410724.34375, 'auc': 0.9199734831248849, 'best_threshold': 118.5271987915039, 'best_fscore': 0.9592559787422499, 'best_pr': 0.9721723518850988, 'best_rc': 0.9466783216783217, 'threshold': 482.6997756149292, 'median': 56.706565856933594, 'mad': 95.77616119384766, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-24 22:37:48.778 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-24 22:37:48.779 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 22:37:48.780 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'quote', 'frontend']
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #9/10, 分数: 0.0000
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: quote (id=14) → 0.0000
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: frontend (id=1) → 0.0000
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: product-catalog (id=2) → 0.0000
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: load-generator (id=3) → 0.0000
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: cart (id=4) → 0.0000
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: currency (id=10) → 0.0000
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: checkout (id=12) → 0.0000
2025-12-24 22:37:48.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #9: shipping (id=13) → 0.0000
2025-12-24 22:37:48.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 22:37:48.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 22:37:48.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-24 22:37:48.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-24 22:37:48.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-24 22:37:48.785 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-24 22:37:48.785 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-24 22:37:48.785 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-24 22:37:48.785 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 22:37:48.785 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 22:37:48.785 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-24 22:37:48.785 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-24 22:37:48.785 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-24 22:37:48.785 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 22:37:48.785 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-24 22:37:48.785 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-24 22:37:48.786 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-24 22:37:48.786 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-24 22:37:48.786 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 22:37:48.786 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 22:37:48.786 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-24 22:37:48.786 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 22:37:48.787 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 22:37:48.787 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'quote', 'frontend']
2025-12-24 22:37:48.787 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #9/10, 分数: 0.0000
2025-12-24 22:37:48.787 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 22:37:48.787 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 22:37:48.787 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: quote (id=14) → 0.0000
2025-12-24 22:37:48.788 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: frontend (id=1) → 0.0000
2025-12-24 22:37:48.788 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: product-catalog (id=2) → 0.0000
2025-12-24 22:37:48.788 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: load-generator (id=3) → 0.0000
2025-12-24 22:37:48.788 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: cart (id=4) → 0.0000
2025-12-24 22:37:48.788 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: currency (id=10) → 0.0000
2025-12-24 22:37:48.788 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: checkout (id=12) → 0.0000
2025-12-24 22:37:48.788 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #9: shipping (id=13) → 0.0000
2025-12-24 22:37:48.788 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 22:37:49.646 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-24 22:37:49.647 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-24 22:37:49.647 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-24 22:37:49.648 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-24 22:37:49.648 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-24 22:37:49.649 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=242, Top3=307, Top5=438
2025-12-24 22:37:49.649 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2115, Top3=0.2684, Top5=0.3829
2025-12-24 22:37:49.650 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-24 22:37:49.650 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-24 22:37:49.651 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-24 22:37:49.651 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-24 22:37:49.651 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-24 22:37:49.651 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-24 22:37:49.653 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-24 22:37:49.653 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2115，Top3根因定位准确率: 0.2684，Top5根因定位准确率: 0.3829
2025-12-24 22:37:49.811 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-24 22:37:49.892 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 6
2025-12-24 22:37:49.893 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-24 22:50:19.998 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 6  Loss: 9174.94958704297 Structure Loss: 19124.621390951743 Latency Loss: 46.841716541069566
2025-12-24 22:50:45.907 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 6  Loss: -37.63697147369385 Structure Loss: 3.6082909372117786 Latency Loss: -2.0527195069524975
2025-12-24 22:50:45.909 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-24 22:50:45.913 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-24 22:50:45.914 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-24 22:50:45.914 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-24 22:59:02.089 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-24 22:59:02.129 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 445920.09375, 'auc': 0.9203070049923253, 'best_threshold': 191.04969787597656, 'best_fscore': 0.9583333333333334, 'best_pr': 0.9721223021582733, 'best_rc': 0.9449300699300699, 'threshold': 680.3765215393066, 'median': 86.74140930175781, 'mad': 133.46713256835938, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-24 22:59:02.129 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-24 22:59:02.130 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-24 22:59:02.131 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-24 22:59:02.131 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 22:59:02.131 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-24 22:59:02.159 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-24 22:59:02.159 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-24 22:59:02.159 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-24 22:59:02.159 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-24 22:59:02.160 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 22:59:03.150 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-24 22:59:03.150 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-24 22:59:03.150 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-24 22:59:03.150 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-24 22:59:03.150 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-24 22:59:03.151 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=242, Top3=298, Top5=403
2025-12-24 22:59:03.151 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2115, Top3=0.2605, Top5=0.3523
2025-12-24 22:59:03.151 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-24 22:59:03.151 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-24 22:59:03.151 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-24 22:59:03.151 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-24 22:59:03.151 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-24 22:59:03.151 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-24 22:59:03.151 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-24 22:59:03.151 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2115，Top3根因定位准确率: 0.2605，Top5根因定位准确率: 0.3523
2025-12-24 22:59:03.441 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-24 22:59:03.806 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 7
2025-12-24 22:59:03.806 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-24 23:12:44.124 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 7  Loss: 8572.494282684704 Structure Loss: 19928.39691924481 Latency Loss: 13.678096861237346
2025-12-24 23:13:08.203 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 7  Loss: -58.638747957017685 Structure Loss: 3.5821415848202176 Latency Loss: -2.227187249395582
2025-12-24 23:13:08.204 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-24 23:13:08.208 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-24 23:13:08.208 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-24 23:13:08.209 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-24 23:21:07.979 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-24 23:21:07.992 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 409782.53125, 'auc': 0.9215594069520353, 'best_threshold': 271.5753479003906, 'best_fscore': 0.9592198581560284, 'best_pr': 0.9730215827338129, 'best_rc': 0.9458041958041958, 'threshold': 975.8882174377442, 'median': 124.93766784667969, 'mad': 191.31942749023438, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-24 23:21:07.993 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-24 23:21:07.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-24 23:21:07.995 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-24 23:21:07.996 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-24 23:21:07.996 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 23:21:07.996 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 23:21:07.996 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-24 23:21:07.996 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-24 23:21:07.996 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-24 23:21:07.996 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-24 23:21:07.996 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-24 23:21:07.997 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-24 23:21:07.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-24 23:21:07.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 23:21:09.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-24 23:21:09.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-24 23:21:09.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-24 23:21:09.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-24 23:21:09.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-24 23:21:09.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=242, Top3=293, Top5=407
2025-12-24 23:21:09.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2115, Top3=0.2561, Top5=0.3558
2025-12-24 23:21:09.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-24 23:21:09.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-24 23:21:09.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-24 23:21:09.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-24 23:21:09.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-24 23:21:09.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-24 23:21:09.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-24 23:21:09.085 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2115，Top3根因定位准确率: 0.2561，Top5根因定位准确率: 0.3558
2025-12-24 23:21:09.500 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-24 23:21:09.620 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 8
2025-12-24 23:21:09.621 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-24 23:34:16.716 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 8  Loss: 7222.422045839895 Structure Loss: 17644.918216896676 Latency Loss: 5.94031162368189
2025-12-24 23:34:40.258 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 8  Loss: -81.09652328491211 Structure Loss: 2.9139206409454346 Latency Loss: -2.4195198350482516
2025-12-24 23:34:40.259 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-24 23:34:40.264 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-24 23:34:40.266 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-24 23:34:40.266 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-24 23:42:36.919 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-24 23:42:36.935 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 413746.75, 'auc': 0.9217970695689832, 'best_threshold': 317.7001037597656, 'best_fscore': 0.9574090505767524, 'best_pr': 0.972072072072072, 'best_rc': 0.9431818181818182, 'threshold': 1192.0063043914795, 'median': 174.74192810058594, 'mad': 228.71180725097656, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-24 23:42:36.935 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-24 23:42:36.936 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-24 23:42:36.937 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-24 23:42:36.937 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 23:42:36.937 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-24 23:42:36.938 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-24 23:42:36.939 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-24 23:42:37.630 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-24 23:42:37.630 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-24 23:42:37.630 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-24 23:42:37.631 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-24 23:42:37.631 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-24 23:42:37.631 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=241, Top3=292, Top5=408
2025-12-24 23:42:37.631 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2107, Top3=0.2552, Top5=0.3566
2025-12-24 23:42:37.631 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-24 23:42:37.631 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-24 23:42:37.631 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-24 23:42:37.631 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-24 23:42:37.631 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-24 23:42:37.631 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-24 23:42:37.631 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-24 23:42:37.631 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2107，Top3根因定位准确率: 0.2552，Top5根因定位准确率: 0.3566
2025-12-24 23:42:37.770 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-24 23:42:37.893 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 9
2025-12-24 23:42:37.893 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-24 23:55:48.828 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 9  Loss: 7245.025281169627 Structure Loss: 20223.99177688943 Latency Loss: -1.3552221461097793
2025-12-24 23:56:12.187 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 9  Loss: -99.4178352355957 Structure Loss: 2.3907388846079507 Latency Loss: -2.460313227441576
2025-12-24 23:56:12.188 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-24 23:56:12.195 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-24 23:56:12.196 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-24 23:56:12.196 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 00:05:00.141 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 00:05:00.200 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 191340.90625, 'auc': 0.9453609639672441, 'best_threshold': 368.7314758300781, 'best_fscore': 0.9596452328159646, 'best_pr': 0.9738973897389739, 'best_rc': 0.9458041958041958, 'threshold': 1402.4453194335938, 'median': 188.4049530029297, 'mad': 272.9530029296875, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 00:05:00.220 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 00:05:00.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 00:05:00.222 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 00:05:00.222 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 00:05:00.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 00:05:00.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 00:05:02.157 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 00:05:02.157 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 00:05:02.157 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 00:05:02.157 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 00:05:02.157 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 00:05:02.157 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=241, Top3=292, Top5=409
2025-12-25 00:05:02.157 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2107, Top3=0.2552, Top5=0.3575
2025-12-25 00:05:02.158 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 00:05:02.158 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 00:05:02.158 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 00:05:02.158 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 00:05:02.158 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 00:05:02.158 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 00:05:02.158 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 00:05:02.158 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2107，Top3根因定位准确率: 0.2552，Top5根因定位准确率: 0.3575
2025-12-25 00:05:02.267 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 00:05:02.361 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 10
2025-12-25 00:05:02.361 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 00:17:04.580 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 10  Loss: 6234.650950573458 Structure Loss: 18113.73722600627 Latency Loss: 0.19169795041037077
2025-12-25 00:17:32.315 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 10  Loss: -125.86848788791232 Structure Loss: 2.5083361201816134 Latency Loss: -2.58396659957038
2025-12-25 00:17:32.316 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 00:17:32.320 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 00:17:32.320 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 00:17:32.321 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 00:24:31.221 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 00:24:31.282 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 171295.671875, 'auc': 0.9544335929952512, 'best_threshold': 470.85614013671875, 'best_fscore': 0.9599644128113879, 'best_pr': 0.9773550724637681, 'best_rc': 0.9431818181818182, 'threshold': 1679.0371584106445, 'median': 226.47021484375, 'mad': 326.58099365234375, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 00:24:31.282 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 00:24:31.283 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 00:24:31.283 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 00:24:31.283 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 00:24:31.283 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 00:24:31.283 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 00:24:31.283 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 00:24:31.283 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 00:24:31.283 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 00:24:31.283 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 00:24:31.283 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 00:24:31.284 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 00:24:31.284 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 00:24:31.285 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 00:24:31.285 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 00:24:31.286 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 00:24:31.769 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 00:24:31.773 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 00:24:31.773 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 00:24:31.773 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 00:24:31.773 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 00:24:31.773 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=242, Top3=293, Top5=408
2025-12-25 00:24:31.773 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2115, Top3=0.2561, Top5=0.3566
2025-12-25 00:24:31.773 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 00:24:31.773 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 00:24:31.773 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 00:24:31.773 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 00:24:31.773 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 00:24:31.773 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 00:24:31.773 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 00:24:31.774 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2115，Top3根因定位准确率: 0.2561，Top5根因定位准确率: 0.3566
2025-12-25 00:24:31.881 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 00:24:31.959 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 11
2025-12-25 00:24:31.960 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 00:36:17.959 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 11  Loss: 5252.47455223008 Structure Loss: 16977.687893932853 Latency Loss: -1.7645230942433423
2025-12-25 00:36:48.257 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 11  Loss: -156.58997090657553 Structure Loss: 3.3271283176210193 Latency Loss: -2.6825363636016846
2025-12-25 00:36:48.268 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 00:36:48.279 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 00:36:48.302 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 00:36:48.302 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 00:49:22.638 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 00:49:22.715 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 297890.59375, 'auc': 0.9411513071819729, 'best_threshold': 519.5507202148438, 'best_fscore': 0.9592198581560284, 'best_pr': 0.9730215827338129, 'best_rc': 0.9458041958041958, 'threshold': 2020.2765508605958, 'median': 270.2601318359375, 'mad': 393.4566345214844, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 00:49:22.715 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 00:49:22.716 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 00:49:22.717 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 00:49:22.717 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 00:49:22.717 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 00:49:22.723 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 00:49:22.723 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 00:49:22.723 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 00:49:22.723 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 00:49:22.724 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 00:49:22.724 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 00:49:22.724 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 00:49:22.724 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 00:49:22.728 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 00:49:22.729 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 00:49:22.729 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 00:49:22.729 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 00:49:22.729 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 00:49:22.729 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 00:49:22.729 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 00:49:22.729 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 00:49:22.729 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 00:49:22.729 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 00:49:23.764 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 00:49:23.765 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 00:49:23.765 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 00:49:23.766 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 00:49:23.766 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 00:49:23.766 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=243, Top3=291, Top5=408
2025-12-25 00:49:23.766 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2124, Top3=0.2544, Top5=0.3566
2025-12-25 00:49:23.766 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 00:49:23.767 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 00:49:23.767 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 00:49:23.767 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 00:49:23.767 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 00:49:23.768 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 00:49:23.768 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 00:49:23.768 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2124，Top3根因定位准确率: 0.2544，Top5根因定位准确率: 0.3566
2025-12-25 00:49:24.039 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 00:49:24.202 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 12
2025-12-25 00:49:24.203 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 01:04:23.971 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 12  Loss: 5123.97621711882 Structure Loss: 18328.394564463288 Latency Loss: -1.8967654247685235
2025-12-25 01:04:49.779 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 12  Loss: -188.58899095323352 Structure Loss: 3.357805358039008 Latency Loss: -2.7527444892459445
2025-12-25 01:04:49.780 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 01:04:49.784 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 01:04:49.784 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 01:04:49.784 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 01:12:05.491 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 01:12:05.522 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 298350.8125, 'auc': 0.9509442753729438, 'best_threshold': 630.078369140625, 'best_fscore': 0.9600709849157055, 'best_pr': 0.9747747747747748, 'best_rc': 0.9458041958041958, 'threshold': 2442.071493212891, 'median': 330.52947998046875, 'mad': 474.738525390625, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 01:12:05.526 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 01:12:05.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 01:12:05.531 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 01:12:05.532 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 01:12:05.532 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 01:12:05.532 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 01:12:05.533 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 01:12:06.255 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 01:12:06.255 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 01:12:06.255 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 01:12:06.255 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 01:12:06.255 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 01:12:06.255 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=243, Top3=290, Top5=406
2025-12-25 01:12:06.255 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2124, Top3=0.2535, Top5=0.3549
2025-12-25 01:12:06.256 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 01:12:06.256 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 01:12:06.256 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 01:12:06.256 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 01:12:06.256 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 01:12:06.256 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 01:12:06.256 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 01:12:06.256 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2124，Top3根因定位准确率: 0.2535，Top5根因定位准确率: 0.3549
2025-12-25 01:12:06.422 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 01:12:06.492 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 13
2025-12-25 01:12:06.499 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 01:24:09.530 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 13  Loss: 4980.470607266568 Structure Loss: 18652.267202000217 Latency Loss: -1.4193257111133915
2025-12-25 01:24:38.384 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 13  Loss: -237.46216837565103 Structure Loss: 3.016732136408488 Latency Loss: -2.8604507711198597
2025-12-25 01:24:38.384 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 01:24:38.390 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 01:24:38.390 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 01:24:38.390 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 01:41:33.235 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 01:41:33.256 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 266199.21875, 'auc': 0.9548872899122949, 'best_threshold': 754.8732299804688, 'best_fscore': 0.9643493761140821, 'best_pr': 0.9836363636363636, 'best_rc': 0.9458041958041958, 'threshold': 2871.217600048828, 'median': 374.3349609375, 'mad': 561.374755859375, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 01:41:33.264 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 01:41:33.265 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 01:41:33.266 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 01:41:33.266 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 01:41:33.266 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 01:41:33.272 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 01:41:33.272 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 01:41:33.272 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 01:41:33.272 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 01:41:33.273 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 01:41:34.498 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 01:41:34.500 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 01:41:34.500 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 01:41:34.500 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 01:41:34.500 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 01:41:34.500 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=241, Top3=290, Top5=407
2025-12-25 01:41:34.500 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2107, Top3=0.2535, Top5=0.3558
2025-12-25 01:41:34.500 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 01:41:34.500 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 01:41:34.500 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 01:41:34.500 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 01:41:34.500 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 01:41:34.500 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 01:41:34.500 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 01:41:34.500 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2107，Top3根因定位准确率: 0.2535，Top5根因定位准确率: 0.3558
2025-12-25 01:41:34.697 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 01:41:34.949 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 14
2025-12-25 01:41:34.950 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 01:55:18.033 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 14  Loss: 4701.472652926303 Structure Loss: 19534.365587598026 Latency Loss: -1.9249184167031015
2025-12-25 01:55:38.570 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 14  Loss: -316.496336195204 Structure Loss: 2.213688996103075 Latency Loss: -3.0674925645192466
2025-12-25 01:55:38.570 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 01:55:38.575 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 01:55:38.575 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 01:55:38.575 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 02:02:04.952 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 02:02:04.989 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 42415.42578125, 'auc': 0.9455317115473022, 'best_threshold': 960.8222045898438, 'best_fscore': 0.9609236234458259, 'best_pr': 0.9765342960288809, 'best_rc': 0.9458041958041958, 'threshold': 3707.5628279541015, 'median': 459.3456726074219, 'mad': 730.2974853515625, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 02:02:04.996 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 02:02:04.997 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 02:02:04.998 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 02:02:04.998 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 02:02:04.998 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 02:02:04.999 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 02:02:05.644 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 02:02:05.645 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 02:02:05.646 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 02:02:05.646 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 02:02:05.646 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 02:02:05.646 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=242, Top3=293, Top5=406
2025-12-25 02:02:05.646 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2115, Top3=0.2561, Top5=0.3549
2025-12-25 02:02:05.646 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 02:02:05.646 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 02:02:05.646 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 02:02:05.646 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 02:02:05.646 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 02:02:05.646 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 02:02:05.646 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 02:02:05.646 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2115，Top3根因定位准确率: 0.2561，Top5根因定位准确率: 0.3549
2025-12-25 02:02:05.880 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 02:02:06.017 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 15
2025-12-25 02:02:06.017 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 02:13:25.574 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 15  Loss: 3953.8098112805055 Structure Loss: 18054.878264544404 Latency Loss: -2.0481935084456264
2025-12-25 02:14:07.269 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 15  Loss: -400.2765587700738 Structure Loss: 2.8278481562932334 Latency Loss: -3.107700745264689
2025-12-25 02:14:07.272 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 02:14:07.287 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 02:14:07.287 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 02:14:07.287 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 02:25:54.126 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 02:25:54.152 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 208030.484375, 'auc': 0.9589825645226147, 'best_threshold': 1303.65380859375, 'best_fscore': 0.9656403391343151, 'best_pr': 0.9863263445761167, 'best_rc': 0.9458041958041958, 'threshold': 5249.024724414063, 'median': 514.1657104492188, 'mad': 1064.53955078125, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 02:25:54.152 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 02:25:54.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 02:25:54.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 02:25:54.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 02:25:54.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 02:25:54.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 02:25:54.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 02:25:54.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 02:25:54.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 02:25:54.154 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 02:25:54.154 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 02:25:54.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 02:25:54.155 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 02:25:55.180 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 02:25:55.181 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 02:25:55.181 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 02:25:55.181 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 02:25:55.181 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 02:25:55.181 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=241, Top3=294, Top5=406
2025-12-25 02:25:55.181 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2107, Top3=0.2570, Top5=0.3549
2025-12-25 02:25:55.181 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 02:25:55.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 02:25:55.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 02:25:55.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 02:25:55.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 02:25:55.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 02:25:55.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 02:25:55.181 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2107，Top3根因定位准确率: 0.2570，Top5根因定位准确率: 0.3549
2025-12-25 02:25:55.456 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 02:25:55.604 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 16
2025-12-25 02:25:55.604 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 02:46:15.812 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 16  Loss: 3525.7388976446473 Structure Loss: 17067.29160440536 Latency Loss: -1.475468901124331
2025-12-25 02:46:50.990 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 16  Loss: -553.0509016248915 Structure Loss: 2.848107099533081 Latency Loss: -3.2757432063420615
2025-12-25 02:46:50.992 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 02:46:51.014 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 02:46:51.014 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 02:46:51.014 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 03:01:06.111 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 03:01:06.187 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 172084.5625, 'auc': 0.9608239119031837, 'best_threshold': 1702.1292724609375, 'best_fscore': 0.9660714285714287, 'best_pr': 0.9872262773722628, 'best_rc': 0.9458041958041958, 'threshold': 6690.998290527344, 'median': 736.62548828125, 'mad': 1338.72314453125, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 03:01:06.190 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 03:01:06.191 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 03:01:06.220 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 03:01:06.221 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 03:01:06.221 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 03:01:06.221 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 03:01:06.222 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 03:01:06.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 03:01:06.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 03:01:06.223 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 03:01:07.512 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 03:01:07.513 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 03:01:07.513 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 03:01:07.513 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 03:01:07.513 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 03:01:07.513 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=240, Top3=295, Top5=406
2025-12-25 03:01:07.513 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2098, Top3=0.2579, Top5=0.3549
2025-12-25 03:01:07.513 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 03:01:07.513 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 03:01:07.513 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 03:01:07.513 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 03:01:07.513 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 03:01:07.517 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 03:01:07.517 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 03:01:07.517 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2098，Top3根因定位准确率: 0.2579，Top5根因定位准确率: 0.3549
2025-12-25 03:01:07.857 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 03:01:08.193 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 17
2025-12-25 03:01:08.193 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 03:19:22.621 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 17  Loss: 3692.974514196415 Structure Loss: 18881.7676308996 Latency Loss: -1.3472912978417804
2025-12-25 03:20:10.374 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 17  Loss: -748.4181349012587 Structure Loss: 2.336595892906189 Latency Loss: -3.4861278269026013
2025-12-25 03:20:10.417 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 03:20:10.421 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 03:20:10.421 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 03:20:10.421 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 03:33:53.492 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 03:33:53.592 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 101050.9140625, 'auc': 0.9613377679931211, 'best_threshold': 1996.2174072265625, 'best_fscore': 0.9665327978580992, 'best_pr': 0.9872379216043756, 'best_rc': 0.9466783216783217, 'threshold': 9500.028415478515, 'median': 667.5283203125, 'mad': 1985.813232421875, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 03:33:53.592 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 03:33:53.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 03:33:53.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 03:33:53.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 03:33:53.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 03:33:53.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 03:33:53.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 03:33:53.594 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 03:33:53.626 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 03:33:53.626 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 03:33:53.626 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 03:33:53.626 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 03:33:53.626 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 03:33:53.626 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 03:33:53.626 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 03:33:53.626 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 03:33:53.626 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 03:33:53.626 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 03:33:53.626 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 03:33:53.627 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 03:33:54.877 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 03:33:54.877 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 03:33:54.877 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 03:33:54.877 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 03:33:54.877 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 03:33:54.877 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=240, Top3=294, Top5=406
2025-12-25 03:33:54.877 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2098, Top3=0.2570, Top5=0.3549
2025-12-25 03:33:54.877 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 03:33:54.877 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 03:33:54.877 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 03:33:54.877 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 03:33:54.877 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 03:33:54.877 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 03:33:54.877 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 03:33:54.878 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2098，Top3根因定位准确率: 0.2570，Top5根因定位准确率: 0.3549
2025-12-25 03:33:55.371 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 03:33:55.642 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 18
2025-12-25 03:33:55.642 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 03:53:32.843 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 18  Loss: 3424.8553241691966 Structure Loss: 19053.2885625836 Latency Loss: -1.526684812389978
2025-12-25 03:54:15.840 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 18  Loss: -1098.4524570041233 Structure Loss: 2.570748978190952 Latency Loss: -3.7186683813730874
2025-12-25 03:54:15.840 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 03:54:15.862 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 03:54:15.873 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 03:54:15.876 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 04:05:57.242 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 04:05:57.336 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 63596.7578125, 'auc': 0.9624347071812259, 'best_threshold': 3210.331298828125, 'best_fscore': 0.967799642218247, 'best_pr': 0.9908424908424909, 'best_rc': 0.9458041958041958, 'threshold': 14208.584077685548, 'median': 894.3955688476562, 'mad': 2993.432373046875, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 04:05:57.336 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 04:05:57.336 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 04:05:57.336 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 04:05:57.336 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 04:05:57.336 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 04:05:57.336 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 04:05:57.336 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 04:05:57.337 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 04:05:57.337 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 04:05:57.338 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 04:05:57.338 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 04:05:57.368 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 04:05:57.368 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 04:05:57.368 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 04:05:57.368 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 04:05:57.368 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 04:05:57.368 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 04:05:57.368 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 04:05:57.368 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 04:05:57.368 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 04:05:57.369 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 04:05:57.369 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 04:05:57.369 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 04:05:57.369 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 04:05:57.369 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 04:05:57.369 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 04:05:57.369 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 04:05:57.369 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 04:05:58.841 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 04:05:58.842 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 04:05:58.842 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 04:05:58.842 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 04:05:58.842 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 04:05:58.843 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=241, Top3=294, Top5=406
2025-12-25 04:05:58.843 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2107, Top3=0.2570, Top5=0.3549
2025-12-25 04:05:58.843 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 04:05:58.843 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 04:05:58.843 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 04:05:58.844 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 04:05:58.844 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 04:05:58.844 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 04:05:58.844 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 04:05:58.844 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2107，Top3根因定位准确率: 0.2570，Top5根因定位准确率: 0.3549
2025-12-25 04:05:59.167 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 04:05:59.445 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 19
2025-12-25 04:05:59.445 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 04:23:51.438 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 19  Loss: 2858.305750176458 Structure Loss: 17846.518712548484 Latency Loss: -1.550222382687106
2025-12-25 04:24:19.258 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 19  Loss: -1636.2192925347222 Structure Loss: 2.918232798576355 Latency Loss: -4.1258358558019
2025-12-25 04:24:19.259 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 04:24:19.262 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 04:24:19.262 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 04:24:19.263 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 04:35:39.470 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 04:35:39.515 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 197799.34375, 'auc': 0.9597059590761036, 'best_threshold': 4349.431640625, 'best_fscore': 0.967799642218247, 'best_pr': 0.9908424908424909, 'best_rc': 0.9458041958041958, 'threshold': 19202.811138671874, 'median': 1264.3863525390625, 'mad': 4033.1005859375, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 04:35:39.515 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 04:35:39.515 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 04:35:39.519 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 04:35:39.520 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 04:35:39.520 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 04:35:39.520 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 04:35:39.521 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 04:35:40.742 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 04:35:40.742 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 04:35:40.742 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 04:35:40.742 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 04:35:40.742 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 04:35:40.742 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=240, Top3=294, Top5=407
2025-12-25 04:35:40.742 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2098, Top3=0.2570, Top5=0.3558
2025-12-25 04:35:40.742 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 04:35:40.742 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 04:35:40.742 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 04:35:40.742 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 04:35:40.743 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 04:35:40.743 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 04:35:40.743 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 04:35:40.743 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2098，Top3根因定位准确率: 0.2570，Top5根因定位准确率: 0.3558
2025-12-25 04:35:41.034 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 04:35:41.104 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 20
2025-12-25 04:35:41.104 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 04:54:04.545 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 20  Loss: 2542.255668111367 Structure Loss: 18793.432408451295 Latency Loss: -1.9051374911081673
2025-12-25 04:54:39.944 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 20  Loss: -2402.016587999132 Structure Loss: 2.7654184897740683 Latency Loss: -4.223770565456814
2025-12-25 04:54:39.945 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 04:54:39.949 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 04:54:39.949 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 04:54:39.949 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 05:05:51.752 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 05:05:51.775 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 208689.203125, 'auc': 0.9402026708055122, 'best_threshold': 6465.73876953125, 'best_fscore': 0.9639198218262807, 'best_pr': 0.9827429609445958, 'best_rc': 0.9458041958041958, 'threshold': 26890.809759375, 'median': 2178.53759765625, 'mad': 5556.06640625, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 05:05:51.775 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 05:05:51.793 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 05:05:51.794 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 05:05:51.794 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 05:05:51.794 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 05:05:51.795 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 05:05:53.470 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 05:05:53.471 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 05:05:53.471 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 05:05:53.471 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 05:05:53.471 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 05:05:53.471 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=241, Top3=294, Top5=407
2025-12-25 05:05:53.472 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2107, Top3=0.2570, Top5=0.3558
2025-12-25 05:05:53.472 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 05:05:53.472 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 05:05:53.472 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 05:05:53.472 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 05:05:53.475 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 05:05:53.475 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 05:05:53.475 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 05:05:53.475 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2107，Top3根因定位准确率: 0.2570，Top5根因定位准确率: 0.3558
2025-12-25 05:05:53.581 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 05:05:53.652 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 21
2025-12-25 05:05:53.652 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 05:24:25.934 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 21  Loss: 1309.4436879677348 Structure Loss: 16766.44447482879 Latency Loss: -2.5155759025918374
2025-12-25 05:25:06.129 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 21  Loss: -3475.0441216362847 Structure Loss: 2.8169615268707275 Latency Loss: -4.598937392234802
2025-12-25 05:25:06.129 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 05:25:06.148 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 05:25:06.149 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 05:25:06.149 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 05:37:00.161 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 05:37:00.205 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 211569.5, 'auc': 0.9633297906064133, 'best_threshold': 9162.216796875, 'best_fscore': 0.9691275167785235, 'best_pr': 0.9926672777268561, 'best_rc': 0.9466783216783217, 'threshold': 44794.09979960937, 'median': 2281.054443359375, 'mad': 9558.21875, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 05:37:00.215 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 05:37:00.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 05:37:00.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 05:37:00.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 05:37:00.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 05:37:00.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 05:37:00.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 05:37:00.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 05:37:00.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 05:37:00.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 05:37:00.241 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 05:37:00.241 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 05:37:00.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 05:37:00.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 05:37:00.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 05:37:00.242 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 05:37:00.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 05:37:00.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 05:37:00.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 05:37:00.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 05:37:00.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 05:37:00.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 05:37:00.243 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 05:37:00.251 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 05:37:00.251 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 05:37:00.251 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 05:37:00.251 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 05:37:00.252 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 05:37:01.030 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 05:37:01.030 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 05:37:01.030 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 05:37:01.030 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 05:37:01.030 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 05:37:01.030 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=244, Top3=294, Top5=407
2025-12-25 05:37:01.030 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2133, Top3=0.2570, Top5=0.3558
2025-12-25 05:37:01.030 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 05:37:01.030 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 05:37:01.030 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 05:37:01.030 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 05:37:01.030 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 05:37:01.030 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 05:37:01.030 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 05:37:01.030 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2133，Top3根因定位准确率: 0.2570，Top5根因定位准确率: 0.3558
2025-12-25 05:37:01.397 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 05:37:01.530 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 22
2025-12-25 05:37:01.530 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 05:56:13.789 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 22  Loss: 747.6146729724242 Structure Loss: 18372.185368789378 Latency Loss: -2.814545847696833
2025-12-25 05:56:54.189 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 22  Loss: -5097.026991102431 Structure Loss: 2.842431492275662 Latency Loss: -5.0221577352947655
2025-12-25 05:56:54.189 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 05:56:54.206 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 05:56:54.206 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 05:56:54.206 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 06:07:39.147 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 06:07:39.164 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 184594.375, 'auc': 0.9635451413485263, 'best_threshold': 9977.4345703125, 'best_fscore': 0.9705357142857144, 'best_pr': 0.9917883211678832, 'best_rc': 0.9501748251748252, 'threshold': 63439.7003515625, 'median': 3195.89990234375, 'mad': 13544.62890625, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 06:07:39.165 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 06:07:39.165 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 06:07:39.166 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 06:07:39.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 06:07:39.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 06:07:39.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 06:07:39.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 06:07:39.170 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 06:07:39.171 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 06:07:39.171 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 06:07:39.171 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 06:07:39.172 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 06:07:39.173 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 06:07:40.052 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 06:07:40.052 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 06:07:40.052 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 06:07:40.052 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 06:07:40.052 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 06:07:40.052 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=244, Top3=294, Top5=407
2025-12-25 06:07:40.052 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2133, Top3=0.2570, Top5=0.3558
2025-12-25 06:07:40.052 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 06:07:40.052 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 06:07:40.052 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 06:07:40.052 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 06:07:40.052 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 06:07:40.052 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 06:07:40.052 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 06:07:40.052 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2133，Top3根因定位准确率: 0.2570，Top5根因定位准确率: 0.3558
2025-12-25 06:07:40.598 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 06:07:40.772 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 23
2025-12-25 06:07:40.772 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 06:25:10.058 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 23  Loss: -321.79104100595606 Structure Loss: 18111.507308273845 Latency Loss: -2.8443586885338963
2025-12-25 06:25:43.122 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 23  Loss: -7644.154568142361 Structure Loss: 2.678313308291965 Latency Loss: -5.462204138437907
2025-12-25 06:25:43.123 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 06:25:43.138 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 06:25:43.139 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 06:25:43.139 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 06:37:17.125 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 06:37:17.205 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 101807.7890625, 'auc': 0.9637516408593774, 'best_threshold': 9267.52734375, 'best_fscore': 0.971123944913372, 'best_pr': 0.987353206865402, 'best_rc': 0.9554195804195804, 'threshold': 87006.05610585937, 'median': 3466.868408203125, 'mad': 18782.13671875, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 06:37:17.215 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 06:37:17.216 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 06:37:17.239 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 06:37:17.239 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 06:37:17.239 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 06:37:17.239 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 06:37:17.240 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 06:37:17.240 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 06:37:17.240 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 06:37:17.241 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 06:37:18.687 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 06:37:18.688 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 06:37:18.688 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 06:37:18.688 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 06:37:18.688 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 06:37:18.688 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=245, Top3=294, Top5=407
2025-12-25 06:37:18.688 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2142, Top3=0.2570, Top5=0.3558
2025-12-25 06:37:18.688 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 06:37:18.688 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 06:37:18.688 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 06:37:18.688 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 06:37:18.688 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 06:37:18.688 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 06:37:18.688 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 06:37:18.688 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2142，Top3根因定位准确率: 0.2570，Top5根因定位准确率: 0.3558
2025-12-25 06:37:19.310 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 06:37:19.784 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 24
2025-12-25 06:37:19.785 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 06:56:22.474 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 24  Loss: -1614.6137562364636 Structure Loss: 18461.034911606497 Latency Loss: -2.9198447935061878
2025-12-25 06:56:54.248 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 24  Loss: -11337.592827690973 Structure Loss: 4.420048793156941 Latency Loss: -5.913814279768202
2025-12-25 06:56:54.250 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 06:56:54.253 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 06:56:54.254 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 06:56:54.254 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 07:08:04.991 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 07:08:05.011 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 10653.0595703125, 'auc': 0.9644102876393034, 'best_threshold': 13378.91015625, 'best_fscore': 0.9715555555555555, 'best_pr': 0.9882459312839059, 'best_rc': 0.9554195804195804, 'threshold': 141094.00326875, 'median': 4784.4658203125, 'mad': 30646.5078125, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 07:08:05.013 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 07:08:05.013 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 07:08:05.014 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 07:08:05.015 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 07:08:05.015 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 07:08:05.015 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 07:08:05.015 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 07:08:05.015 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 07:08:05.015 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 07:08:05.015 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 07:08:05.015 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 07:08:05.015 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 07:08:05.015 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 07:08:05.015 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 07:08:05.016 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 07:08:05.017 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 07:08:05.017 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 07:08:05.017 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 07:08:05.017 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 07:08:05.017 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 07:08:05.017 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 07:08:05.017 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 07:08:05.017 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 07:08:05.017 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 07:08:05.017 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 07:08:06.356 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 07:08:06.356 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 07:08:06.356 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 07:08:06.356 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 07:08:06.356 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 07:08:06.356 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=245, Top3=293, Top5=406
2025-12-25 07:08:06.356 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2142, Top3=0.2561, Top5=0.3549
2025-12-25 07:08:06.356 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 07:08:06.356 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 07:08:06.356 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 07:08:06.356 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 07:08:06.356 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 07:08:06.356 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 07:08:06.356 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 07:08:06.356 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2142，Top3根因定位准确率: 0.2561，Top5根因定位准确率: 0.3549
2025-12-25 07:08:06.685 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 07:08:06.781 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 25
2025-12-25 07:08:06.782 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 07:26:37.924 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 25  Loss: -3255.8787865969216 Structure Loss: 18515.208816616472 Latency Loss: -2.621342022525202
2025-12-25 07:27:08.284 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 25  Loss: -18631.625325520832 Structure Loss: 3.938122351964315 Latency Loss: -6.656367248959011
2025-12-25 07:27:08.290 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 07:27:08.303 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 07:27:08.303 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 07:27:08.303 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 07:38:35.588 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 07:38:35.709 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 179499.921875, 'auc': 0.9640182674875569, 'best_threshold': 18416.23046875, 'best_fscore': 0.9711495783399912, 'best_pr': 0.9864743011722272, 'best_rc': 0.9562937062937062, 'threshold': 219189.953596875, 'median': 7951.40478515625, 'mad': 47492.81640625, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 07:38:35.710 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 07:38:35.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 07:38:35.711 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 07:38:35.711 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 07:38:35.711 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 07:38:35.712 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 07:38:35.712 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 07:38:35.712 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 07:38:35.712 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 07:38:35.712 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 07:38:35.712 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 07:38:35.712 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 07:38:35.712 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 07:38:35.712 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 07:38:35.712 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['payment', 'frontend', 'product-catalog']
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: payment (id=15) → 1.0000
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 07:38:35.739 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 07:38:35.740 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: quote (id=14) → 0.0000
2025-12-25 07:38:35.740 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 07:38:37.195 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 07:38:37.196 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 07:38:37.196 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 07:38:37.196 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 07:38:37.196 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 07:38:37.196 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=244, Top3=293, Top5=407
2025-12-25 07:38:37.196 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.2133, Top3=0.2561, Top5=0.3558
2025-12-25 07:38:37.196 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 07:38:37.196 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 07:38:37.196 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 07:38:37.196 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 07:38:37.196 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 07:38:37.197 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 07:38:37.197 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 07:38:37.197 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.2133，Top3根因定位准确率: 0.2561，Top5根因定位准确率: 0.3558
2025-12-25 07:38:37.300 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 07:38:37.391 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 26
2025-12-25 07:38:37.391 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 07:58:33.040 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 26  Loss: -2518.803244260278 Structure Loss: 19587.733017336614 Latency Loss: -1.7513517129539262
2025-12-25 07:59:11.310 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 26  Loss: -27189.860948350695 Structure Loss: 2.7107388840781317 Latency Loss: -7.126203258832295
2025-12-25 07:59:11.310 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 07:59:11.351 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 07:59:11.351 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 07:59:11.351 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 08:10:39.667 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 08:10:39.714 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 1895185.25, 'auc': 0.9637807221622896, 'best_threshold': 19297.751953125, 'best_fscore': 0.9716814159292037, 'best_pr': 0.9838709677419355, 'best_rc': 0.9597902097902098, 'threshold': 336356.823134375, 'median': 10980.1337890625, 'mad': 73154.5234375, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 08:10:39.715 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 08:10:39.715 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 08:10:39.719 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 08:10:39.720 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 08:10:39.720 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 08:10:39.720 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 08:10:39.721 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 08:10:40.781 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 08:10:40.781 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 08:10:40.781 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 08:10:40.781 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 08:10:40.781 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 08:10:40.781 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=5, Top3=53, Top5=167
2025-12-25 08:10:40.781 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0044, Top3=0.0463, Top5=0.1460
2025-12-25 08:10:40.782 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 08:10:40.782 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 08:10:40.782 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 08:10:40.782 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 08:10:40.782 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 08:10:40.782 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 08:10:40.782 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 08:10:40.782 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0044，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 08:10:40.869 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 08:10:40.980 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 27
2025-12-25 08:10:40.980 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 08:29:04.271 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 27  Loss: -17864.04564704517 Structure Loss: 18511.192670887354 Latency Loss: -4.459304401189974
2025-12-25 08:29:34.337 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 27  Loss: -48309.14995659722 Structure Loss: 2.6915256579717 Latency Loss: -8.271556721793281
2025-12-25 08:29:34.337 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 08:29:34.342 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 08:29:34.343 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 08:29:34.343 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 08:42:03.127 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 08:42:03.149 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 6368292.0, 'auc': 0.9270295208574093, 'best_threshold': 49014.984375, 'best_fscore': 0.9668288367978771, 'best_pr': 0.9785138764547896, 'best_rc': 0.9554195804195804, 'threshold': 673165.76978125, 'median': 21486.970703125, 'mad': 146517.109375, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 08:42:03.149 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 08:42:03.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 08:42:03.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 08:42:03.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 08:42:03.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 08:42:03.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 08:42:03.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 08:42:03.153 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 08:42:03.153 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 08:42:03.153 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 08:42:03.154 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 08:42:04.985 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 08:42:04.985 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 08:42:04.985 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 08:42:04.985 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 08:42:04.985 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 08:42:04.985 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 08:42:04.985 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 08:42:04.985 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 08:42:04.985 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 08:42:04.985 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 08:42:04.985 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 08:42:04.985 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 08:42:04.985 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 08:42:04.985 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 08:42:04.985 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 08:42:05.305 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 08:42:05.473 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 28
2025-12-25 08:42:05.473 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 09:01:20.847 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 28  Loss: 45734.88787418781 Structure Loss: 20435.52817142098 Latency Loss: 5.678362443895623
2025-12-25 09:01:54.541 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 28  Loss: -83528.33637152778 Structure Loss: 2.660873850186666 Latency Loss: -9.351334174474081
2025-12-25 09:01:54.541 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 09:01:54.581 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 09:01:54.581 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 09:01:54.581 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 09:12:12.962 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 09:12:12.985 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 97761.6875, 'auc': 0.9640743911538417, 'best_threshold': 64861.16015625, 'best_fscore': 0.9737427681352916, 'best_pr': 0.9918404351767905, 'best_rc': 0.9562937062937062, 'threshold': 1088831.19310625, 'median': 23062.14453125, 'mad': 239617.125, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 09:12:12.986 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 09:12:12.986 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 09:12:12.986 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 09:12:12.986 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 09:12:12.986 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 09:12:12.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 09:12:12.988 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 09:12:12.988 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 09:12:12.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 09:12:12.989 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 09:12:12.989 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 09:12:12.989 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 09:12:12.989 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 09:12:12.989 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 09:12:12.989 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 09:12:12.989 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 09:12:12.989 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 09:12:13.854 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 09:12:13.855 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 09:12:13.855 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 09:12:13.855 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 09:12:13.855 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 09:12:13.855 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=6, Top3=53, Top5=167
2025-12-25 09:12:13.855 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0052, Top3=0.0463, Top5=0.1460
2025-12-25 09:12:13.855 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 09:12:13.855 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 09:12:13.855 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 09:12:13.855 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 09:12:13.855 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 09:12:13.855 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 09:12:13.855 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 09:12:13.855 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0052，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 09:12:14.232 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 09:12:14.498 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 29
2025-12-25 09:12:14.498 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 09:31:46.912 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 29  Loss: 190484.5524563931 Structure Loss: 20353.280627915028 Latency Loss: 14.292192144559161
2025-12-25 09:32:18.318 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 29  Loss: -151733.62152777778 Structure Loss: 2.877944959534539 Latency Loss: -10.935428301493326
2025-12-25 09:32:18.319 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 09:32:18.322 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 09:32:18.323 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 09:32:18.323 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 09:42:30.838 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 09:42:30.850 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 15437636.0, 'auc': 0.9637299584883519, 'best_threshold': 74956.1328125, 'best_fscore': 0.9738359201773837, 'best_pr': 0.9882988298829883, 'best_rc': 0.9597902097902098, 'threshold': 1944838.7317375, 'median': 39977.7578125, 'mad': 428270.375, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 09:42:30.851 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 09:42:30.852 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 09:42:30.852 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 09:42:30.852 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 09:42:30.852 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 09:42:30.852 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 09:42:30.853 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 09:42:30.853 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 09:42:30.853 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 09:42:30.853 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 09:42:30.853 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 09:42:30.853 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 09:42:30.861 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 09:42:30.861 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 09:42:30.861 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 09:42:30.861 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 09:42:30.861 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 09:42:30.861 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 09:42:30.862 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 09:42:30.862 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 09:42:30.862 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 09:42:30.863 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 09:42:32.429 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 09:42:32.431 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 09:42:32.431 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 09:42:32.431 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 09:42:32.431 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 09:42:32.431 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=5, Top3=53, Top5=167
2025-12-25 09:42:32.432 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0044, Top3=0.0463, Top5=0.1460
2025-12-25 09:42:32.432 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 09:42:32.432 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 09:42:32.432 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 09:42:32.432 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 09:42:32.432 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 09:42:32.432 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 09:42:32.432 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 09:42:32.432 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0044，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 09:42:32.868 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 09:42:33.183 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 30
2025-12-25 09:42:33.184 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 10:02:21.883 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 30  Loss: 79997654.0583206 Structure Loss: 17112.170575339605 Latency Loss: 3682.229162042684
2025-12-25 10:02:45.380 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 30  Loss: -279366.4548611111 Structure Loss: 2.6553117169274225 Latency Loss: -12.758265495300293
2025-12-25 10:02:45.380 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 10:02:45.397 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 10:02:45.398 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 10:02:45.398 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 10:12:35.399 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 10:12:35.428 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 29177989120.0, 'auc': 0.9270760612842754, 'best_threshold': 122968.65625, 'best_fscore': 0.9682539682539684, 'best_pr': 0.9768683274021353, 'best_rc': 0.9597902097902098, 'threshold': 3735343.8578, 'median': 67412.4921875, 'mad': 824661.9375, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 10:12:35.428 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 10:12:35.429 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 10:12:35.429 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 10:12:35.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 10:12:35.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 10:12:35.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 10:12:35.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 10:12:35.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 10:12:35.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 10:12:35.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 10:12:35.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 10:12:35.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 10:12:35.431 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 10:12:35.431 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 10:12:35.431 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 10:12:35.431 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 10:12:35.431 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 10:12:35.431 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 10:12:35.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 10:12:35.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 10:12:35.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 10:12:35.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 10:12:35.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 10:12:35.432 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 10:12:35.432 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 10:12:35.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 10:12:35.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 10:12:35.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 10:12:35.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 10:12:35.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 10:12:35.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 10:12:35.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 10:12:35.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 10:12:35.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 10:12:36.210 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 10:12:36.218 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 10:12:36.238 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 10:12:36.238 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 10:12:36.238 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 10:12:36.238 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 10:12:36.238 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 10:12:36.238 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 10:12:36.238 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 10:12:36.238 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 10:12:36.238 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 10:12:36.238 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 10:12:36.238 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 10:12:36.238 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 10:12:36.239 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 10:12:36.550 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 10:12:36.663 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 31
2025-12-25 10:12:36.663 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 10:30:40.505 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 31  Loss: 47567283.57632658 Structure Loss: 19931.042603635848 Latency Loss: 2111.3698372994318
2025-12-25 10:31:06.319 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 31  Loss: -467665.28125 Structure Loss: 3.6768524911668568 Latency Loss: -14.167216300964355
2025-12-25 10:31:06.319 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 10:31:06.333 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 10:31:06.333 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 10:31:06.333 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 10:42:36.549 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 10:42:36.577 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 7769.52294921875, 'auc': 0.9641972556967247, 'best_threshold': 144230.859375, 'best_fscore': 0.975652943780434, 'best_pr': 0.9883408071748879, 'best_rc': 0.9632867132867133, 'threshold': 6711843.32775, 'median': 71700.46875, 'mad': 1492905.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 10:42:36.578 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 10:42:36.579 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 10:42:36.579 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 10:42:36.587 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 10:42:36.587 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 10:42:36.587 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 10:42:36.587 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 10:42:36.587 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 10:42:36.587 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 10:42:36.587 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 10:42:36.587 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 10:42:36.587 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 10:42:36.588 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 10:42:36.588 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 10:42:36.588 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 10:42:36.588 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 10:42:36.588 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 10:42:36.588 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 10:42:36.592 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 10:42:36.593 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 10:42:36.593 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 10:42:36.593 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 10:42:36.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 10:42:36.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 10:42:36.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 10:42:36.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 10:42:36.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 10:42:36.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 10:42:36.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 10:42:36.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 10:42:36.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 10:42:36.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 10:42:37.503 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 10:42:37.506 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 10:42:37.506 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 10:42:37.506 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 10:42:37.507 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 10:42:37.507 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=6, Top3=53, Top5=167
2025-12-25 10:42:37.509 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0052, Top3=0.0463, Top5=0.1460
2025-12-25 10:42:37.509 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 10:42:37.509 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 10:42:37.509 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 10:42:37.509 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 10:42:37.509 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 10:42:37.513 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 10:42:37.513 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 10:42:37.513 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0052，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 10:42:37.742 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 10:42:37.821 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 32
2025-12-25 10:42:37.821 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 10:58:48.689 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 32  Loss: 539524.5628867574 Structure Loss: 19710.73585460785 Latency Loss: 13.911909695308987
2025-12-25 10:59:25.750 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 32  Loss: -924109.6006944445 Structure Loss: 3.412513494491577 Latency Loss: -16.792399671342636
2025-12-25 10:59:25.772 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 10:59:25.776 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 10:59:25.776 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 10:59:25.776 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 11:11:47.876 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 11:11:47.896 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 801179.9375, 'auc': 0.964034625686564, 'best_threshold': 166528.21875, 'best_fscore': 0.9752431476569408, 'best_pr': 0.9865831842576028, 'best_rc': 0.9641608391608392, 'threshold': 15053391.645187499, 'median': 104986.3359375, 'mad': 3360853.75, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 11:11:47.904 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 11:11:47.905 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 11:11:47.906 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 11:11:47.906 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 11:11:47.906 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 11:11:47.918 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 11:11:47.918 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 11:11:47.918 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 11:11:47.918 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 11:11:47.919 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 11:11:49.040 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 11:11:49.040 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 11:11:49.040 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 11:11:49.040 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 11:11:49.040 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 11:11:49.040 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 11:11:49.040 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 11:11:49.040 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 11:11:49.040 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 11:11:49.040 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 11:11:49.040 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 11:11:49.040 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 11:11:49.040 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 11:11:49.040 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 11:11:49.040 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 11:11:49.747 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 11:11:49.896 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 33
2025-12-25 11:11:49.897 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 11:26:16.854 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 33  Loss: 780267840.6075186 Structure Loss: 17595.846242123753 Latency Loss: 9278.946395017132
2025-12-25 11:26:39.025 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 33  Loss: -1770755.923611111 Structure Loss: 4.001825955179003 Latency Loss: -19.884988996717667
2025-12-25 11:26:39.026 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 11:26:39.031 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 11:26:39.031 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 11:26:39.031 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 11:35:54.149 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 11:35:54.164 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 816818.5, 'auc': 0.9647088020552127, 'best_threshold': 261633.15625, 'best_fscore': 0.980323567993004, 'best_pr': 0.9807524059492564, 'best_rc': 0.9798951048951049, 'threshold': 31888586.1295, 'median': 236306.6875, 'mad': 7116390.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 11:35:54.164 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 11:35:54.165 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 11:35:54.167 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 11:35:54.168 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 11:35:54.168 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 11:35:54.168 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 11:35:54.169 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 11:35:55.921 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 11:35:55.921 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 11:35:55.921 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 11:35:55.921 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 11:35:55.921 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 11:35:55.921 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 11:35:55.921 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 11:35:55.921 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 11:35:55.921 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 11:35:55.921 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 11:35:55.921 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 11:35:55.921 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 11:35:55.921 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 11:35:55.921 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 11:35:55.921 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 11:35:56.269 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 11:35:56.532 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 34
2025-12-25 11:35:56.532 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 11:51:57.530 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 34  Loss: 399121.5643564357 Structure Loss: 18924.590665959633 Latency Loss: 2.440253833732983
2025-12-25 11:52:35.181 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 34  Loss: -3312084.8055555555 Structure Loss: 2.8780674404568143 Latency Loss: -23.41537602742513
2025-12-25 11:52:35.181 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 11:52:35.189 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 11:52:35.189 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 11:52:35.190 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 12:04:22.557 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 12:04:22.568 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 4534067.0, 'auc': 0.9645088571885899, 'best_threshold': 301998.3125, 'best_fscore': 0.9795028347143481, 'best_pr': 0.9773716275021758, 'best_rc': 0.9816433566433567, 'threshold': 59678539.5225, 'median': 308415.5625, 'mad': 13348200.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 12:04:22.568 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 12:04:22.568 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 12:04:22.568 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 12:04:22.568 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 12:04:22.568 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 12:04:22.568 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 12:04:22.568 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 12:04:22.568 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 12:04:22.568 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 12:04:22.568 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 12:04:22.568 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 12:04:22.569 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 12:04:22.569 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 12:04:22.569 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 12:04:22.570 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 12:04:22.912 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 12:04:22.913 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 12:04:22.913 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 12:04:22.913 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 12:04:22.913 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 12:04:22.913 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 12:04:22.913 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 12:04:22.913 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 12:04:22.913 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 12:04:22.913 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 12:04:22.913 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 12:04:22.913 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 12:04:22.913 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 12:04:22.913 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 12:04:22.913 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 12:04:23.013 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 12:04:23.077 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 35
2025-12-25 12:04:23.077 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 12:20:50.672 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 35  Loss: 11775864.396735767 Structure Loss: 17764.073543379654 Latency Loss: 73.97881188251004
2025-12-25 12:21:23.841 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 35  Loss: -5432361.194444444 Structure Loss: 2.7211542791790433 Latency Loss: -25.355720414055718
2025-12-25 12:21:23.841 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 12:21:23.857 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 12:21:23.857 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 12:21:23.857 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 12:30:33.552 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 12:30:33.597 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 4259496192.0, 'auc': 0.9647054138826423, 'best_threshold': 625548.0625, 'best_fscore': 0.9834061135371179, 'best_pr': 0.9825479930191972, 'best_rc': 0.9842657342657343, 'threshold': 104193910.4481, 'median': 634439.8125, 'mad': 23283302.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 12:30:33.597 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 12:30:33.611 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 12:30:33.612 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 12:30:33.613 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 12:30:33.613 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 12:30:33.613 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 12:30:33.614 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 12:30:35.060 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 12:30:35.060 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 12:30:35.060 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 12:30:35.060 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 12:30:35.060 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 12:30:35.060 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 12:30:35.060 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 12:30:35.060 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 12:30:35.060 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 12:30:35.061 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 12:30:35.061 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 12:30:35.061 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 12:30:35.061 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 12:30:35.061 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 12:30:35.061 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 12:30:35.231 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 12:30:35.318 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 36
2025-12-25 12:30:35.319 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 12:47:30.469 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 36  Loss: 4825969479.535892 Structure Loss: 18859.954626945724 Latency Loss: 14442.42146103453
2025-12-25 12:48:01.121 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 36  Loss: -10734692.944444444 Structure Loss: 2.6740740537643433 Latency Loss: -30.50446531507704
2025-12-25 12:48:01.121 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 12:48:01.152 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 12:48:01.152 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 12:48:01.152 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 12:59:47.664 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 12:59:47.780 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 353949843456.0, 'auc': 0.9646990370925466, 'best_threshold': 1162841.75, 'best_fscore': 0.9829022358614644, 'best_pr': 0.9859278803869833, 'best_rc': 0.9798951048951049, 'threshold': 199515942.2391, 'median': 976059.9375, 'mad': 44637772.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 12:59:47.780 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 12:59:47.781 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 12:59:47.782 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 12:59:47.782 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 12:59:47.782 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 12:59:47.782 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 12:59:47.782 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 12:59:47.782 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 12:59:47.782 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 12:59:47.782 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 12:59:47.782 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 12:59:47.782 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 12:59:47.783 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 12:59:47.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 12:59:47.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 12:59:47.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 12:59:47.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 12:59:47.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 12:59:47.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 12:59:47.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 12:59:47.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 12:59:47.784 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 12:59:48.262 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 12:59:48.262 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 12:59:48.267 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 12:59:48.267 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 12:59:48.267 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 12:59:48.267 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 12:59:48.267 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 12:59:48.267 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 12:59:48.267 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 12:59:48.267 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 12:59:48.267 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 12:59:48.267 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 12:59:48.267 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 12:59:48.267 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 12:59:48.267 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 12:59:48.594 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 12:59:48.788 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 37
2025-12-25 12:59:48.788 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 13:15:23.807 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 37  Loss: 2559385363.9455447 Structure Loss: 18564.90963556669 Latency Loss: 5048.149830596281
2025-12-25 13:16:03.102 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 37  Loss: -18931960.944444444 Structure Loss: 3.6188847488827176 Latency Loss: -34.444911850823296
2025-12-25 13:16:03.103 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 13:16:03.125 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 13:16:03.125 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 13:16:03.125 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 13:25:53.512 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 13:25:53.524 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -5154421.0, 'auc': 0.9680312038141174, 'best_threshold': 2005466.0, 'best_fscore': 0.9846961084390032, 'best_pr': 0.9851268591426072, 'best_rc': 0.9842657342657343, 'threshold': 356142628.6864, 'median': 1463101.0, 'mad': 79742688.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 13:25:53.524 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 13:25:53.524 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 13:25:53.524 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 13:25:53.525 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 13:25:53.526 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 13:25:53.526 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 13:25:53.526 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 13:25:53.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 13:25:53.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 13:25:53.527 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 13:25:53.527 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 13:25:53.527 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 13:25:53.528 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 13:25:53.529 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 13:25:54.335 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 13:25:54.335 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 13:25:54.335 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 13:25:54.335 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 13:25:54.335 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 13:25:54.335 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=6, Top3=53, Top5=167
2025-12-25 13:25:54.335 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0052, Top3=0.0463, Top5=0.1460
2025-12-25 13:25:54.335 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 13:25:54.335 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 13:25:54.335 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 13:25:54.335 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 13:25:54.335 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 13:25:54.335 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 13:25:54.335 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 13:25:54.335 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0052，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 13:25:54.697 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 13:25:55.030 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 38
2025-12-25 13:25:55.034 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 13:43:17.740 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 38  Loss: 37810889.262376234 Structure Loss: 18721.679334260596 Latency Loss: 47.874629384220235
2025-12-25 13:43:35.662 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 38  Loss: -31553638.722222224 Structure Loss: 3.197420014275445 Latency Loss: -37.23083151711358
2025-12-25 13:43:35.663 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 13:43:35.667 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 13:43:35.672 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 13:43:35.676 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 13:52:11.576 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 13:52:11.640 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 15217744.0, 'auc': 0.9647850535168987, 'best_threshold': 1639120.625, 'best_fscore': 0.9817708333333334, 'best_pr': 0.975, 'best_rc': 0.9886363636363636, 'threshold': 624574698.24, 'median': 2146008.0, 'mad': 139940800.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 13:52:11.645 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 13:52:11.646 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 13:52:11.663 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 13:52:11.663 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 13:52:11.663 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 13:52:11.664 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 13:52:11.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 13:52:11.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 13:52:11.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 13:52:11.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 13:52:11.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 13:52:11.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 13:52:11.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 13:52:11.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 13:52:11.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 13:52:11.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 13:52:11.671 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 13:52:11.671 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 13:52:11.671 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 13:52:11.671 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 13:52:11.671 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 13:52:11.671 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 13:52:12.692 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 13:52:12.707 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 13:52:12.707 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 13:52:12.707 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 13:52:12.707 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 13:52:12.707 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 13:52:12.707 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 13:52:12.707 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 13:52:12.707 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 13:52:12.707 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 13:52:12.707 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 13:52:12.707 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 13:52:12.707 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 13:52:12.707 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 13:52:12.708 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 13:52:13.247 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 13:52:13.447 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 39
2025-12-25 13:52:13.447 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 14:05:38.041 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 39  Loss: 86111492.96782178 Structure Loss: 20427.397658640057 Latency Loss: 73.19223291330998
2025-12-25 14:05:54.328 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 39  Loss: -56702100.44444445 Structure Loss: 2.9527056879467435 Latency Loss: -44.42703119913737
2025-12-25 14:05:54.329 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 14:05:54.334 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 14:05:54.334 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 14:05:54.335 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 14:14:56.825 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 14:14:56.846 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -24614402.0, 'auc': 0.9649428197611826, 'best_threshold': 4528043.0, 'best_fscore': 0.9851268591426072, 'best_pr': 0.9859894921190894, 'best_rc': 0.9842657342657343, 'threshold': 1061078863.7852, 'median': 3596693.75, 'mad': 237753984.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 14:14:56.846 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 14:14:56.846 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 14:14:56.847 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 14:14:56.847 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 14:14:56.847 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 14:14:56.848 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 14:14:56.848 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 14:14:56.848 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 14:14:56.848 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 14:14:56.848 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 14:14:56.848 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 14:14:56.848 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 14:14:56.848 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 14:14:56.848 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 14:14:56.848 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 14:14:56.854 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 14:14:57.536 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 14:14:57.536 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 14:14:57.536 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 14:14:57.537 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 14:14:57.537 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 14:14:57.537 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=6, Top3=53, Top5=167
2025-12-25 14:14:57.537 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0052, Top3=0.0463, Top5=0.1460
2025-12-25 14:14:57.537 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 14:14:57.537 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 14:14:57.537 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 14:14:57.537 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 14:14:57.537 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 14:14:57.537 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 14:14:57.537 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 14:14:57.537 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0052，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 14:14:57.630 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 14:14:57.720 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 40
2025-12-25 14:14:57.721 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 14:26:02.807 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 40  Loss: 67847648.2970297 Structure Loss: 19002.720691704955 Latency Loss: 44.559086653265624
2025-12-25 14:26:27.960 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 40  Loss: -95216971.1111111 Structure Loss: 2.7082977957195706 Latency Loss: -49.3121715121799
2025-12-25 14:26:27.961 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 14:26:27.972 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 14:26:27.972 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 14:26:27.972 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 14:34:39.134 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 14:34:39.145 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 23996334080.0, 'auc': 0.9614218306655643, 'best_threshold': 3465200.0, 'best_fscore': 0.9771255934397928, 'best_pr': 0.9650468883205456, 'best_rc': 0.9895104895104895, 'threshold': 1593447430.6608, 'median': 5696979.0, 'mad': 356974336.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 14:34:39.146 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 14:34:39.146 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 14:34:39.147 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 14:34:39.149 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 14:34:39.149 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 14:34:39.149 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 14:34:39.149 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 14:34:39.149 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 14:34:39.149 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 14:34:39.149 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 14:34:39.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 14:34:39.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 14:34:39.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 14:34:39.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 14:34:39.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 14:34:39.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 14:34:39.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 14:34:39.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 14:34:39.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 14:34:39.150 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 14:34:39.151 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 14:34:39.151 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 14:34:39.151 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 14:34:39.152 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 14:34:39.869 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 14:34:39.870 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 14:34:39.870 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 14:34:39.870 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 14:34:39.870 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 14:34:39.870 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 14:34:39.870 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 14:34:39.870 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 14:34:39.870 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 14:34:39.870 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 14:34:39.870 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 14:34:39.870 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 14:34:39.870 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 14:34:39.870 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 14:34:39.870 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 14:34:39.977 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 14:34:40.050 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 41
2025-12-25 14:34:40.050 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 14:45:28.990 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 41  Loss: 13341689590.009901 Structure Loss: 18555.322904741704 Latency Loss: 5522.958359656947
2025-12-25 14:45:44.123 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 41  Loss: -156651583.1111111 Structure Loss: 2.6113162173165216 Latency Loss: -55.614966498480904
2025-12-25 14:45:44.127 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 14:45:44.131 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 14:45:44.132 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 14:45:44.133 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 14:54:16.295 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 14:54:16.322 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 3890754355200.0, 'auc': 0.9645443472700895, 'best_threshold': 8356441.5, 'best_fscore': 0.9799825935596171, 'best_pr': 0.975736568457539, 'best_rc': 0.9842657342657343, 'threshold': 2160343521.0528, 'median': 10672962.0, 'mad': 483310976.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 14:54:16.322 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 14:54:16.322 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 14:54:16.322 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 14:54:16.323 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 14:54:16.329 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 14:54:16.329 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 14:54:16.329 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 14:54:16.329 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 14:54:16.329 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 14:54:16.329 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 14:54:16.329 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 14:54:16.329 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 14:54:16.329 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 14:54:16.329 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 14:54:16.329 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 14:54:16.330 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 14:54:16.330 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 14:54:16.331 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 14:54:16.332 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 14:54:16.332 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 14:54:16.332 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 14:54:16.332 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 14:54:16.332 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 14:54:16.332 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 14:54:16.332 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 14:54:16.332 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 14:54:16.332 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 14:54:16.332 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 14:54:17.314 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 14:54:17.314 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 14:54:17.314 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 14:54:17.314 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 14:54:17.315 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 14:54:17.315 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=8, Top3=53, Top5=167
2025-12-25 14:54:17.315 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0070, Top3=0.0463, Top5=0.1460
2025-12-25 14:54:17.315 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 14:54:17.315 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 14:54:17.315 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 14:54:17.315 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 14:54:17.315 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 14:54:17.315 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 14:54:17.315 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 14:54:17.315 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0070，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 14:54:17.669 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 14:54:17.980 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 42
2025-12-25 14:54:17.980 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 15:04:14.310 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 42  Loss: 43888831905.960396 Structure Loss: 20888.452938901464 Latency Loss: 13760.223917229341
2025-12-25 15:04:28.673 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 42  Loss: -252017893.33333334 Structure Loss: 2.615096171696981 Latency Loss: -59.593966801961265
2025-12-25 15:04:28.674 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 15:04:28.677 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 15:04:28.677 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 15:04:28.677 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 15:09:23.680 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 15:09:23.698 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 91822512.0, 'auc': 0.9651721014486526, 'best_threshold': 12583863.0, 'best_fscore': 0.9838357361293143, 'best_pr': 0.9834061135371179, 'best_rc': 0.9842657342657343, 'threshold': 2847618414.8208, 'median': 12583863.0, 'mad': 637401536.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 15:09:23.699 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:09:23.707 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:09:23.708 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:09:23.708 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 15:09:23.708 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 15:09:23.708 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 15:09:23.708 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:09:23.708 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 15:09:23.708 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 15:09:23.708 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:09:23.708 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:09:23.708 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 15:09:23.709 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:09:23.710 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:09:24.135 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 15:09:24.136 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 15:09:24.141 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 15:09:24.141 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 15:09:24.141 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 15:09:24.141 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=4, Top3=52, Top5=167
2025-12-25 15:09:24.141 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0035, Top3=0.0455, Top5=0.1460
2025-12-25 15:09:24.141 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 15:09:24.141 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 15:09:24.141 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 15:09:24.141 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 15:09:24.141 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 15:09:24.141 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 15:09:24.141 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 15:09:24.141 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0035，Top3根因定位准确率: 0.0455，Top5根因定位准确率: 0.1460
2025-12-25 15:09:24.250 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 15:09:24.325 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 43
2025-12-25 15:09:24.325 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 15:16:15.814 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 43  Loss: 42298573299.74258 Structure Loss: 19018.17927509502 Latency Loss: 8315.479756034247
2025-12-25 15:16:30.398 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 43  Loss: -415296405.3333333 Structure Loss: 5.4980119069417315 Latency Loss: -66.84742546081543
2025-12-25 15:16:30.398 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 15:16:30.402 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 15:16:30.403 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 15:16:30.407 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 15:21:27.977 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 15:21:27.988 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -181067584.0, 'auc': 0.9651936600697889, 'best_threshold': 15219412.0, 'best_fscore': 0.9851657940663177, 'best_pr': 0.9834494773519163, 'best_rc': 0.9868881118881119, 'threshold': 3020083857.952, 'median': 18122020.0, 'mad': 674931840.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 15:21:27.990 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:21:27.991 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:21:27.992 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:21:27.992 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:21:27.992 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 15:21:27.992 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:21:27.992 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:21:27.992 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:21:27.992 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 15:21:27.992 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 15:21:27.992 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 15:21:27.992 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:21:27.993 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 15:21:27.993 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:21:27.993 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:21:27.994 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:21:28.340 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 15:21:28.340 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 15:21:28.340 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 15:21:28.340 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 15:21:28.340 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 15:21:28.340 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=5, Top3=53, Top5=167
2025-12-25 15:21:28.340 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0044, Top3=0.0463, Top5=0.1460
2025-12-25 15:21:28.340 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 15:21:28.340 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 15:21:28.340 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 15:21:28.340 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 15:21:28.340 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 15:21:28.340 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 15:21:28.340 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 15:21:28.341 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0044，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 15:21:28.505 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 15:21:28.577 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 44
2025-12-25 15:21:28.578 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 15:28:57.594 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 44  Loss: 45465979004.67326 Structure Loss: 19441.21102531033 Latency Loss: 5218.325461935289
2025-12-25 15:29:12.082 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 44  Loss: -659262174.2222222 Structure Loss: 2.6188936365975275 Latency Loss: -72.83723915947809
2025-12-25 15:29:12.082 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 15:29:12.086 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 15:29:12.086 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 15:29:12.086 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 15:33:47.747 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 15:33:47.760 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 11404099715072.0, 'auc': 0.9652318518647012, 'best_threshold': 24261342.0, 'best_fscore': 0.9834205933682373, 'best_pr': 0.9817073170731707, 'best_rc': 0.9851398601398601, 'threshold': 4398464732.8512, 'median': 24708576.0, 'mad': 983352704.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 15:33:47.760 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 15:33:47.760 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:33:47.761 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:33:47.762 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:33:47.762 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 15:33:47.762 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 15:33:47.762 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 15:33:47.762 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:33:47.762 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 15:33:47.763 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 15:33:47.763 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:33:47.764 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:33:48.081 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 15:33:48.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 15:33:48.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 15:33:48.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 15:33:48.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 15:33:48.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=5, Top3=53, Top5=167
2025-12-25 15:33:48.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0044, Top3=0.0463, Top5=0.1460
2025-12-25 15:33:48.085 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 15:33:48.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 15:33:48.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 15:33:48.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 15:33:48.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 15:33:48.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 15:33:48.085 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 15:33:48.086 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0044，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 15:33:48.175 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 15:33:48.296 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 45
2025-12-25 15:33:48.297 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 15:41:44.548 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 45  Loss: 68394095429.9802 Structure Loss: 20039.562190808134 Latency Loss: 6480.863055318889
2025-12-25 15:42:00.022 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 45  Loss: -1076977831.1111112 Structure Loss: 3.2269934283362494 Latency Loss: -80.18880356682672
2025-12-25 15:42:00.022 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 15:42:00.026 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 15:42:00.026 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 15:42:00.026 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 15:46:53.346 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 15:46:53.357 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 11702313680896.0, 'auc': 0.9610667316770143, 'best_threshold': 27813038.0, 'best_fscore': 0.9744920017293559, 'best_pr': 0.9640718562874252, 'best_rc': 0.9851398601398601, 'threshold': 4612138815.3536, 'median': 36090452.0, 'mad': 1028834112.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 15:46:53.357 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 15:46:53.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:46:53.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:46:53.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:46:53.359 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 15:46:53.359 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:46:53.359 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 15:46:53.360 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 15:46:53.741 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 15:46:53.742 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 15:46:53.742 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 15:46:53.743 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 15:46:53.743 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 15:46:53.743 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 15:46:53.743 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 15:46:53.743 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 15:46:53.743 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 15:46:53.743 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 15:46:53.744 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 15:46:53.744 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 15:46:53.744 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 15:46:53.744 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 15:46:53.744 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 15:46:53.884 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 15:46:53.954 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 46
2025-12-25 15:46:53.954 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 15:55:49.324 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 46  Loss: 52311996461.46535 Structure Loss: 19067.289294217924 Latency Loss: 3042.639270678605
2025-12-25 15:56:04.579 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 46  Loss: -1765405390.2222223 Structure Loss: 2.7467781172858343 Latency Loss: -90.70208655463324
2025-12-25 15:56:04.579 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 15:56:04.586 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 15:56:04.586 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 15:56:04.586 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 16:00:57.777 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 16:00:57.796 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 140256034816.0, 'auc': 0.9606138687195203, 'best_threshold': 56106108.0, 'best_fscore': 0.9715536105032825, 'best_pr': 0.9728308501314636, 'best_rc': 0.9702797202797203, 'threshold': 8226156038.6048, 'median': 54503024.0, 'mad': 1837234816.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 16:00:57.797 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 16:00:57.798 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:00:57.798 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:00:57.799 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 16:00:57.800 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:00:57.800 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:00:57.800 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:00:57.800 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 16:00:57.800 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 16:00:57.800 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 16:00:57.800 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:00:57.800 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 16:00:57.800 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 16:00:57.800 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 16:00:57.801 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:00:57.802 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:00:58.180 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 16:00:58.180 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 16:00:58.180 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 16:00:58.180 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 16:00:58.180 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 16:00:58.181 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=6, Top3=53, Top5=167
2025-12-25 16:00:58.181 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0052, Top3=0.0463, Top5=0.1460
2025-12-25 16:00:58.181 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 16:00:58.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 16:00:58.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 16:00:58.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 16:00:58.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 16:00:58.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 16:00:58.181 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 16:00:58.181 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0052，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 16:00:58.368 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 16:00:58.534 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 47
2025-12-25 16:00:58.534 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 16:11:32.313 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 47  Loss: 3252208567.7623763 Structure Loss: 19189.36725895328 Latency Loss: 158.6896078374126
2025-12-25 16:11:46.689 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 47  Loss: -2682521322.6666665 Structure Loss: 3.0051239331563315 Latency Loss: -94.37355338202582
2025-12-25 16:11:46.690 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 16:11:46.694 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 16:11:46.694 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 16:11:46.694 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 16:17:14.417 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 16:17:14.429 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 11150154530816.0, 'auc': 0.9612940076370179, 'best_threshold': 73901824.0, 'best_fscore': 0.9731833910034604, 'best_pr': 0.9631849315068494, 'best_rc': 0.9833916083916084, 'threshold': 10752482163.2768, 'median': 85105232.0, 'mad': 2398349056.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 16:17:14.429 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 16:17:14.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:17:14.430 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 16:17:14.431 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 16:17:14.431 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 16:17:14.431 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:17:14.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 16:17:14.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:17:14.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:17:14.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:17:14.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:17:14.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:17:14.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:17:14.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:17:14.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:17:14.432 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:17:14.433 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 16:17:14.433 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:17:14.433 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:17:14.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:17:14.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:17:14.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 16:17:14.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:17:14.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:17:14.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:17:14.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 16:17:14.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 16:17:14.434 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:17:14.435 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:17:15.018 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 16:17:15.018 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 16:17:15.018 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 16:17:15.019 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 16:17:15.019 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 16:17:15.019 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=53, Top5=167
2025-12-25 16:17:15.019 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0463, Top5=0.1460
2025-12-25 16:17:15.019 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 16:17:15.019 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 16:17:15.019 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 16:17:15.019 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 16:17:15.019 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 16:17:15.019 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 16:17:15.019 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 16:17:15.019 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 16:17:15.136 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 16:17:15.252 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 48
2025-12-25 16:17:15.253 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 16:27:17.202 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 48  Loss: -1522992620.039604 Structure Loss: 18158.381935800066 Latency Loss: -45.069007713015715
2025-12-25 16:27:35.967 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 48  Loss: -4084503075.5555553 Structure Loss: 2.6086072789298163 Latency Loss: -99.6152589586046
2025-12-25 16:27:35.968 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 16:27:35.972 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 16:27:35.972 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 16:27:35.973 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 16:33:12.639 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 16:33:12.658 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -2144023808.0, 'auc': 0.9643365515659903, 'best_threshold': 177599792.0, 'best_fscore': 0.9743135518157663, 'best_pr': 0.9874326750448833, 'best_rc': 0.9615384615384616, 'threshold': 10287759494.476799, 'median': 113269968.0, 'mad': 2287533056.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 16:33:12.658 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 16:33:12.662 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:33:12.662 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:33:12.666 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:33:12.667 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 16:33:12.667 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:33:12.667 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:33:12.668 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:33:13.365 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 16:33:13.372 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 16:33:13.372 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 16:33:13.372 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 16:33:13.372 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 16:33:13.372 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=6, Top3=53, Top5=167
2025-12-25 16:33:13.372 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0052, Top3=0.0463, Top5=0.1460
2025-12-25 16:33:13.372 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 16:33:13.372 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 16:33:13.372 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 16:33:13.372 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 16:33:13.372 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 16:33:13.372 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 16:33:13.372 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 16:33:13.372 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0052，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 16:33:13.510 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 16:33:13.738 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 49
2025-12-25 16:33:13.738 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 16:44:47.175 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 49  Loss: 11837973505.267326 Structure Loss: 18954.72288345966 Latency Loss: 209.7176409239816
2025-12-25 16:45:01.840 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 49  Loss: -6596034844.444445 Structure Loss: 2.6582791142993503 Latency Loss: -110.17758750915527
2025-12-25 16:45:01.840 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 16:45:01.844 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 16:45:01.845 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 16:45:01.845 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 16:50:38.079 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 16:50:38.095 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 1325376768.0, 'auc': 0.9653565924037968, 'best_threshold': 160715264.0, 'best_fscore': 0.9778549717759445, 'best_pr': 0.9715271786022434, 'best_rc': 0.9842657342657343, 'threshold': 11449989507.5328, 'median': 178941504.0, 'mad': 2534072576.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 16:50:38.096 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:50:38.100 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:50:38.101 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 16:50:38.101 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:50:38.101 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 16:50:38.102 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 16:50:38.693 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 16:50:38.694 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 16:50:38.694 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 16:50:38.694 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 16:50:38.694 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 16:50:38.694 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=6, Top3=53, Top5=167
2025-12-25 16:50:38.694 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0052, Top3=0.0463, Top5=0.1460
2025-12-25 16:50:38.694 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 16:50:38.694 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 16:50:38.694 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 16:50:38.696 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 16:50:38.696 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 16:50:38.696 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 16:50:38.696 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 16:50:38.696 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0052，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 16:50:38.923 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 16:50:39.029 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 50
2025-12-25 16:50:39.030 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 16:58:15.608 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 50  Loss: 3322376906.7722774 Structure Loss: 18450.641326604797 Latency Loss: 56.84512485844074
2025-12-25 16:58:30.382 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 50  Loss: -10329084643.555555 Structure Loss: 2.5850848621792264 Latency Loss: -119.15254741244846
2025-12-25 16:58:30.386 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 16:58:30.394 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 16:58:30.394 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 16:58:30.394 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 17:03:40.296 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 17:03:40.346 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -7322997760.0, 'auc': 0.9644214804987529, 'best_threshold': 5510257152.0, 'best_fscore': 0.9709432275368797, 'best_pr': 0.9935956084172004, 'best_rc': 0.9493006993006993, 'threshold': 26555788245.8624, 'median': 258381536.0, 'mad': 5912452608.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 17:03:40.346 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:03:40.347 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:03:40.348 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 17:03:40.348 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:03:40.348 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:03:40.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:03:40.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:03:40.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:03:40.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 17:03:40.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:03:40.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:03:41.173 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 17:03:41.175 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 17:03:41.175 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 17:03:41.175 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 17:03:41.176 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 17:03:41.176 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=5, Top3=53, Top5=167
2025-12-25 17:03:41.176 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0044, Top3=0.0463, Top5=0.1460
2025-12-25 17:03:41.176 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 17:03:41.176 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 17:03:41.176 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 17:03:41.176 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 17:03:41.176 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 17:03:41.176 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 17:03:41.176 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 17:03:41.176 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0044，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 17:03:41.406 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 17:03:41.538 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 51
2025-12-25 17:03:41.538 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 17:10:47.760 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 51  Loss: -6255906009.346535 Structure Loss: 18186.905216119078 Latency Loss: -59.64781926882149
2025-12-25 17:11:02.451 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 51  Loss: -15699210254.222221 Structure Loss: 2.578857739766439 Latency Loss: -125.991519080268
2025-12-25 17:11:02.452 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 17:11:02.455 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 17:11:02.455 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 17:11:02.455 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 17:16:57.673 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 17:16:57.691 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 36272635904.0, 'auc': 0.9644526934119592, 'best_threshold': 731352832.0, 'best_fscore': 0.9760425909494232, 'best_pr': 0.990990990990991, 'best_rc': 0.9615384615384616, 'threshold': 29692991210.700798, 'median': 445276352.0, 'mad': 6575771136.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 17:16:57.691 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 17:16:57.692 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:16:57.692 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 17:16:57.693 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 17:16:57.693 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 17:16:57.693 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:16:57.693 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 17:16:57.694 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:16:57.694 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:16:57.694 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:16:57.694 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:16:57.694 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:16:57.695 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:16:57.695 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:16:57.698 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:16:57.698 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 17:16:57.698 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:16:57.698 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:16:57.699 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 17:16:57.699 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:16:57.699 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:16:57.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:16:57.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 17:16:57.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:16:57.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:16:58.320 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 17:16:58.320 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 17:16:58.320 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 17:16:58.320 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 17:16:58.320 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 17:16:58.320 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=5, Top3=53, Top5=167
2025-12-25 17:16:58.331 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0044, Top3=0.0463, Top5=0.1460
2025-12-25 17:16:58.331 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 17:16:58.331 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 17:16:58.331 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 17:16:58.331 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 17:16:58.331 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 17:16:58.331 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 17:16:58.331 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 17:16:58.331 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0044，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 17:16:58.615 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 17:16:58.845 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 52
2025-12-25 17:16:58.845 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 17:27:07.423 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 52  Loss: -11090774535.60396 Structure Loss: 17020.184155356765 Latency Loss: -73.2149895583049
2025-12-25 17:27:24.964 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 52  Loss: -26425340928.0 Structure Loss: 2.850376261605157 Latency Loss: -145.8039961920844
2025-12-25 17:27:24.964 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 17:27:24.980 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 17:27:24.980 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 17:27:24.980 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 17:33:11.425 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 17:33:11.460 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -16458174464.0, 'auc': 0.9611377434930096, 'best_threshold': 1191497856.0, 'best_fscore': 0.9751111111111113, 'best_pr': 0.9918625678119349, 'best_rc': 0.958916083916084, 'threshold': 30413930165.76, 'median': 649167168.0, 'mad': 6692019200.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 17:33:11.460 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:33:11.461 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:33:11.462 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 17:33:11.462 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:33:11.462 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:33:11.463 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:33:12.124 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 17:33:12.136 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 17:33:12.136 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 17:33:12.136 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 17:33:12.136 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 17:33:12.136 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=5, Top3=53, Top5=167
2025-12-25 17:33:12.136 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0044, Top3=0.0463, Top5=0.1460
2025-12-25 17:33:12.136 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 17:33:12.136 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 17:33:12.136 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 17:33:12.136 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 17:33:12.136 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 17:33:12.136 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 17:33:12.136 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 17:33:12.136 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0044，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 17:33:12.258 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 17:33:12.339 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 53
2025-12-25 17:33:12.340 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 17:43:35.115 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 53  Loss: 175900687291.56436 Structure Loss: 18972.92004634071 Latency Loss: 878.7506645504791
2025-12-25 17:43:50.443 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 53  Loss: -41460041500.44444 Structure Loss: 3.5618178447087607 Latency Loss: -160.44678370157877
2025-12-25 17:43:50.446 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 17:43:50.450 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 17:43:50.453 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 17:43:50.453 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 17:50:14.688 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 17:50:14.699 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -28008437760.0, 'auc': 0.9639939864336997, 'best_threshold': 3090883840.0, 'best_fscore': 0.9737193763919824, 'best_pr': 0.9927338782924614, 'best_rc': 0.9554195804195804, 'threshold': 16673396328.5504, 'median': 874323392.0, 'mad': 3552109568.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 17:50:14.700 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 17:50:14.700 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:50:14.701 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 17:50:14.701 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 17:50:14.701 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 17:50:14.702 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:50:14.702 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 17:50:14.702 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:50:14.702 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:50:14.702 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:50:14.703 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:50:14.703 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:50:14.703 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:50:14.703 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:50:14.703 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:50:14.703 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 17:50:14.703 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:50:14.704 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 17:50:14.704 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:50:14.704 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 17:50:14.705 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 17:50:15.700 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 17:50:15.702 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 17:50:15.702 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 17:50:15.702 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 17:50:15.702 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 17:50:15.703 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=8, Top3=55, Top5=167
2025-12-25 17:50:15.703 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0070, Top3=0.0481, Top5=0.1460
2025-12-25 17:50:15.703 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 17:50:15.703 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 17:50:15.704 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 17:50:15.704 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 17:50:15.704 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 17:50:15.704 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 17:50:15.704 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 17:50:15.705 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0070，Top3根因定位准确率: 0.0481，Top5根因定位准确率: 0.1460
2025-12-25 17:50:15.874 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 17:50:15.973 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 54
2025-12-25 17:50:15.974 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 18:00:30.124 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 54  Loss: -27000505126.019802 Structure Loss: 19321.849534192886 Latency Loss: -86.49935575050883
2025-12-25 18:00:45.831 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 54  Loss: -58901630065.77778 Structure Loss: 2.997819251484341 Latency Loss: -160.16965272691516
2025-12-25 18:00:45.831 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 18:00:45.835 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 18:00:45.835 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 18:00:45.835 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 18:06:36.389 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 18:06:36.438 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -41610432512.0, 'auc': 0.9646456115579995, 'best_threshold': 2658852864.0, 'best_fscore': 0.9769707705934456, 'best_pr': 0.9901256732495511, 'best_rc': 0.9641608391608392, 'threshold': 55897318346.3424, 'median': 1717713792.0, 'mad': 12181214208.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 18:06:36.440 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 18:06:36.440 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:06:36.442 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:06:36.443 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:06:36.443 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:06:36.443 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 18:06:36.443 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:06:36.443 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:06:36.444 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 18:06:36.444 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:06:36.444 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:06:36.445 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:06:37.143 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 18:06:37.144 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 18:06:37.144 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 18:06:37.144 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 18:06:37.144 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 18:06:37.144 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=7, Top3=54, Top5=167
2025-12-25 18:06:37.144 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0061, Top3=0.0472, Top5=0.1460
2025-12-25 18:06:37.144 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 18:06:37.144 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 18:06:37.144 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 18:06:37.144 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 18:06:37.144 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 18:06:37.144 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 18:06:37.144 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 18:06:37.144 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0061，Top3根因定位准确率: 0.0472，Top5根因定位准确率: 0.1460
2025-12-25 18:06:37.346 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 18:06:37.466 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 55
2025-12-25 18:06:37.466 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 18:15:45.344 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 55  Loss: -40310251398.33663 Structure Loss: 18106.227987729973 Latency Loss: -91.85362902726277
2025-12-25 18:16:00.038 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 55  Loss: -92416015473.77777 Structure Loss: 2.559216684765286 Latency Loss: -177.1786872016059
2025-12-25 18:16:00.038 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 18:16:00.047 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 18:16:00.048 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 18:16:00.048 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 18:21:53.619 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 18:21:53.647 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -61078441984.0, 'auc': 0.9644040035275957, 'best_threshold': 13589441536.0, 'best_fscore': 0.9709432275368797, 'best_pr': 0.9935956084172004, 'best_rc': 0.9493006993006993, 'threshold': 56701818275.4304, 'median': 2691119104.0, 'mad': 12143239168.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 18:21:53.651 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 18:21:53.651 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:21:53.655 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:21:53.656 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 18:21:53.656 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:21:53.656 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:21:53.657 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:21:54.311 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 18:21:54.311 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 18:21:54.311 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 18:21:54.311 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 18:21:54.311 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 18:21:54.311 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=5, Top3=54, Top5=167
2025-12-25 18:21:54.311 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0044, Top3=0.0472, Top5=0.1460
2025-12-25 18:21:54.311 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 18:21:54.311 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 18:21:54.311 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 18:21:54.311 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 18:21:54.311 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 18:21:54.311 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 18:21:54.311 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 18:21:54.312 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0044，Top3根因定位准确率: 0.0472，Top5根因定位准确率: 0.1460
2025-12-25 18:21:54.619 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 18:21:54.795 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 56
2025-12-25 18:21:54.795 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 18:30:11.126 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 56  Loss: 439351776918.1782 Structure Loss: 18277.148900276068 Latency Loss: 682.8448425708431
2025-12-25 18:30:24.340 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 56  Loss: -136114860032.0 Structure Loss: 2.5594341357549033 Latency Loss: -185.44903140597873
2025-12-25 18:30:24.341 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 18:30:24.351 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 18:30:24.351 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 18:30:24.351 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 18:35:01.960 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 18:35:01.982 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -93784367104.0, 'auc': 0.9631724532770362, 'best_threshold': 18028136448.0, 'best_fscore': 0.9709432275368797, 'best_pr': 0.9935956084172004, 'best_rc': 0.9493006993006993, 'threshold': 75245701207.6544, 'median': 3654814208.0, 'mad': 16095797248.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 18:35:01.983 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 18:35:01.983 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:35:01.984 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 18:35:01.984 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 18:35:01.984 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 18:35:01.984 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:35:01.984 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 18:35:01.984 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:35:01.984 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:35:01.984 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:35:01.985 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:35:01.985 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:35:01.985 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:35:01.985 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:35:01.985 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:35:01.985 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 18:35:01.985 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:35:01.985 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:35:01.986 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:35:01.987 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 18:35:01.987 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:35:01.987 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:35:01.988 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:35:02.495 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 18:35:02.496 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 18:35:02.496 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 18:35:02.496 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 18:35:02.496 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 18:35:02.497 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=9, Top3=53, Top5=167
2025-12-25 18:35:02.497 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0079, Top3=0.0463, Top5=0.1460
2025-12-25 18:35:02.497 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 18:35:02.497 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 18:35:02.497 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 18:35:02.498 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 18:35:02.498 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 18:35:02.498 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 18:35:02.498 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 18:35:02.499 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0079，Top3根因定位准确率: 0.0463，Top5根因定位准确率: 0.1460
2025-12-25 18:35:02.614 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 18:35:02.729 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 57
2025-12-25 18:35:02.729 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 18:41:45.200 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 57  Loss: -91622717683.32674 Structure Loss: 17512.985704736544 Latency Loss: -104.14435061841908
2025-12-25 18:41:57.310 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 57  Loss: -218888954766.22223 Structure Loss: 3.8320028516981335 Latency Loss: -209.2023722330729
2025-12-25 18:41:57.310 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 18:41:57.315 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 18:41:57.316 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 18:41:57.316 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 18:46:22.576 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 18:46:22.593 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': 1916296757248.0, 'auc': 0.958798065090129, 'best_threshold': 15735608320.0, 'best_fscore': 0.9719875500222322, 'best_pr': 0.9891402714932127, 'best_rc': 0.9554195804195804, 'threshold': 58370338059.4688, 'median': 5737289216.0, 'mad': 11833501696.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 18:46:22.594 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 18:46:22.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:46:22.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 18:46:22.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 18:46:22.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 18:46:22.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:46:22.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 18:46:22.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:46:22.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:46:22.594 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:46:22.595 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:46:22.595 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:46:22.595 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:46:22.595 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:46:22.595 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:46:22.595 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 18:46:22.595 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:46:22.595 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:46:22.595 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:46:22.595 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:46:22.596 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 18:46:22.596 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:46:22.596 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:46:22.597 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:46:22.597 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 18:46:22.597 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 18:46:22.597 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 18:46:22.597 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:46:22.597 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 18:46:22.597 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:46:22.597 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:46:22.600 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:46:22.600 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:46:22.600 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:46:22.600 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:46:22.600 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:46:22.600 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:46:22.600 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 18:46:22.600 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:46:22.600 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:46:23.187 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 18:46:23.187 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 18:46:23.187 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 18:46:23.187 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 18:46:23.187 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 18:46:23.187 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=8, Top3=56, Top5=167
2025-12-25 18:46:23.188 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0070, Top3=0.0490, Top5=0.1460
2025-12-25 18:46:23.188 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 18:46:23.188 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 18:46:23.188 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 18:46:23.188 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 18:46:23.188 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 18:46:23.188 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 18:46:23.188 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 18:46:23.188 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0070，Top3根因定位准确率: 0.0490，Top5根因定位准确率: 0.1460
2025-12-25 18:46:23.314 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 18:46:23.409 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 58
2025-12-25 18:46:23.409 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 18:53:02.685 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 58  Loss: -140440088069.0693 Structure Loss: 19705.81646657344 Latency Loss: -111.5733123250527
2025-12-25 18:53:14.737 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 58  Loss: -322662281671.1111 Structure Loss: 2.6021998988257513 Latency Loss: -216.06868659125433
2025-12-25 18:53:14.738 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 18:53:14.743 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 18:53:14.747 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 18:53:14.747 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 18:58:09.482 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 18:58:09.504 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -216887853056.0, 'auc': 0.9645005060226839, 'best_threshold': 21864499200.0, 'best_fscore': 0.9741532976827096, 'best_pr': 0.9936363636363637, 'best_rc': 0.9554195804195804, 'threshold': 184196601648.7424, 'median': 7516187648.0, 'mad': 39723102208.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 18:58:09.505 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 18:58:09.505 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:58:09.506 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 18:58:09.514 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:58:09.515 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:58:09.516 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 18:58:09.516 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:58:09.516 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 18:58:09.517 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 18:58:10.087 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 18:58:10.087 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 18:58:10.087 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 18:58:10.088 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 18:58:10.088 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 18:58:10.088 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=8, Top3=54, Top5=167
2025-12-25 18:58:10.088 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0070, Top3=0.0472, Top5=0.1460
2025-12-25 18:58:10.088 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 18:58:10.088 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 18:58:10.088 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 18:58:10.088 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 18:58:10.088 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 18:58:10.088 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 18:58:10.088 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 18:58:10.088 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0070，Top3根因定位准确率: 0.0472，Top5根因定位准确率: 0.1460
2025-12-25 18:58:10.253 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 18:58:10.344 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:121 - -------------> Epoch 59
2025-12-25 18:58:10.345 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:124 - Training...
2025-12-25 19:05:26.894 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:128 - Train Epoch: 59  Loss: -212632752918.8119 Structure Loss: 20412.163694432762 Latency Loss: -118.5591965854758
2025-12-25 19:05:39.649 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:134 - Valid Epoch: 59  Loss: -468127068615.1111 Structure Loss: 2.5874982674916587 Latency Loss: -218.56864081488715
2025-12-25 19:05:39.650 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:143 - Valid loss is smaller. Start evaluation...
2025-12-25 19:05:39.653 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 19:05:39.654 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 19:05:39.654 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 19:12:34.520 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 19:12:34.559 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -292402298880.0, 'auc': 0.9643488046998433, 'best_threshold': 15708479488.0, 'best_fscore': 0.9720620842572063, 'best_pr': 0.9864986498649865, 'best_rc': 0.958041958041958, 'threshold': 185166930875.1872, 'median': 9882558464.0, 'mad': 39409229824.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 19:12:34.559 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 19:12:34.559 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 19:12:34.559 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 19:12:34.559 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 19:12:34.560 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 19:12:34.577 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 19:12:34.577 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 19:12:34.577 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 19:12:34.578 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 19:12:35.130 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 19:12:35.131 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 19:12:35.131 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 19:12:35.131 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 19:12:35.131 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 19:12:35.131 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=8, Top3=54, Top5=167
2025-12-25 19:12:35.131 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0070, Top3=0.0472, Top5=0.1460
2025-12-25 19:12:35.131 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 19:12:35.131 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 19:12:35.131 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 19:12:35.131 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 19:12:35.131 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 19:12:35.131 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 19:12:35.131 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 19:12:35.131 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0070，Top3根因定位准确率: 0.0472，Top5根因定位准确率: 0.1460
2025-12-25 19:12:35.329 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:147 - Valid loss is smaller. Model saved.
2025-12-25 19:12:35.500 | INFO     | tracegnn.utils.analyze_root_cause:load_service_id_to_name:33 - Loaded 37 service_id -> service_name mappings from dataset/tianchi2/processed/service_id.yml
2025-12-25 19:12:35.500 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:32 - Loaded service_id mapping for root cause analysis
2025-12-25 19:12:35.500 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:38 - Start Evaluation with nll...
2025-12-25 19:18:18.301 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:164 - -------------------Graph Level Overall-----------------------
2025-12-25 19:18:18.347 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:170 - {'score_normal': -292380147712.0, 'auc': 0.9641178009167763, 'best_threshold': 15771792384.0, 'best_fscore': 0.9720620842572063, 'best_pr': 0.9864986498649865, 'best_rc': 0.958041958041958, 'threshold': 185463731634.176, 'median': 9808145408.0, 'mad': 39492689920.0, 'fscore': 0.0, 'precision': 0.0, 'recall': 0.0}
2025-12-25 19:18:18.348 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:174 - -------------------Root Cause Analysis-----------------------
2025-12-25 19:18:18.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 19:18:18.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #1 - 根因分析
2025-12-25 19:18:18.349 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 19:18:18.350 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 19:18:18.350 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 19:18:18.350 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 19:18:18.350 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 19:18:18.351 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 19:18:18.351 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 19:18:18.351 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 19:18:18.351 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 19:18:18.351 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 19:18:18.352 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 19:18:18.352 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 19:18:18.352 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 19:18:18.352 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 19:18:18.352 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 19:18:18.353 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 19:18:18.354 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #2 - 根因分析
2025-12-25 19:18:18.354 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=19 → name='product' → prefix='product'
2025-12-25 19:18:18.354 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 否
2025-12-25 19:18:18.354 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 19:18:18.354 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:145 - ⚠ 真实根因 service_id=19 ('product') 不在trace图中！将使用前缀匹配。
2025-12-25 19:18:18.355 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:165 - 真实根因前缀 'product' 在所有服务中都未找到！
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #8: shipping (id=13) → 0.0000
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 19:18:18.355 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 19:18:18.356 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:135 - 
==================================================
2025-12-25 19:18:18.356 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:136 - 异常样本 #3 - 根因分析
2025-12-25 19:18:18.356 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:137 - GT: id=13 → name='shipping' → prefix='shipping'
2025-12-25 19:18:18.356 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:138 - GT在图中: 是
2025-12-25 19:18:18.356 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:139 - Top-3 预测: ['quote', 'frontend', 'product-catalog']
2025-12-25 19:18:18.356 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:161 - 真实根因 'shipping' (id=13) 排名: #8/10, 分数: 0.0000
2025-12-25 19:18:18.356 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:168 - 所有服务分数排名（前10）:
2025-12-25 19:18:18.356 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #1: quote (id=14) → 1.0000
2025-12-25 19:18:18.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #2: frontend (id=1) → 0.0000
2025-12-25 19:18:18.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #3: product-catalog (id=2) → 0.0000
2025-12-25 19:18:18.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #4: load-generator (id=3) → 0.0000
2025-12-25 19:18:18.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #5: cart (id=4) → 0.0000
2025-12-25 19:18:18.357 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #6: currency (id=10) → 0.0000
2025-12-25 19:18:18.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #7: checkout (id=12) → 0.0000
2025-12-25 19:18:18.358 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -   ★ #8: shipping (id=13) → 0.0000
2025-12-25 19:18:18.361 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #9: payment (id=15) → 0.0000
2025-12-25 19:18:18.361 | DEBUG    | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:172 -     #10: email (id=16) → 0.0000
2025-12-25 19:18:18.851 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:203 - 
============================================================
2025-12-25 19:18:18.852 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:204 - 根因定位统计汇总:
2025-12-25 19:18:18.852 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:205 -   总异常trace数: 1144
2025-12-25 19:18:18.852 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:206 -   有真实根因标注: 1144
2025-12-25 19:18:18.852 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:207 -   真实根因不在图中: 431 (37.7%)
2025-12-25 19:18:18.852 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:208 -   正确匹配数: Top1=5, Top3=54, Top5=167
2025-12-25 19:18:18.853 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:209 -   准确率: Top1=0.0044, Top3=0.0472, Top5=0.1460
2025-12-25 19:18:18.853 | INFO     | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:210 - ============================================================
2025-12-25 19:18:18.853 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:213 - 
⚠ 发现 431/1144 个样本的真实根因不在trace图中！
2025-12-25 19:18:18.853 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:214 - 这可能是因为:
2025-12-25 19:18:18.854 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:215 -   1. root_cause 使用的是故障注入时的service名，但trace中使用的是运行时的service名
2025-12-25 19:18:18.854 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:216 -   2. service_id映射不一致（如 'shipping.memory' vs 'shipping'）
2025-12-25 19:18:18.854 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:217 -   3. 异常导致相关服务的span没有被采集
2025-12-25 19:18:18.854 | WARNING  | tracegnn.utils.analyze_root_cause:evaluate_with_root_cause:218 - 建议: 检查数据集的root_cause标注和service_id映射是否一致

2025-12-25 19:18:18.854 | INFO     | tracegnn.models.gtrace.mymodel_eval:evaluate:181 - Top1根因定位准确率: 0.0044，Top3根因定位准确率: 0.0472，Top5根因定位准确率: 0.1460
2025-12-25 19:18:18.991 | INFO     | tracegnn.models.gtrace.mymodel_train:trainer:154 - Training finished.
